(this["webpackJsonpseahub-frontend"]=this["webpackJsonpseahub-frontend"]||[]).push([[11],{1581:function(e,t,n){n(54),e.exports=n(1687)},1582:function(e,t,n){},1687:function(e,t,n){"use strict";n.r(t);var s=n(6),a=n(7),r=n(9),i=n(8),c=n(2),o=n.n(c),l=n(24),d=n.n(l),h=n(17),j=n(1),u=n(96),b=n(0),p=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getActiveClass=function(t){return e.props.currentTab==t?"active":""},e.tabItemClick=function(t){e.props.tabItemClick(t)},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{className:"side-panel ".concat(this.props.isSidePanelClosed?"":"left-zero"),children:[Object(b.jsx)("div",{className:"side-panel-north",children:Object(b.jsx)(u.a,{onCloseSidePanel:this.props.onCloseSidePanel})}),Object(b.jsx)("div",{className:"side-panel-center",children:Object(b.jsx)("div",{className:"side-nav",children:Object(b.jsxs)("div",{className:"side-nav-con",children:[Object(b.jsx)("h3",{className:"sf-heading",style:{color:"#f7941d"},children:Object(j.nb)("Admin")}),Object(b.jsxs)("ul",{className:"nav nav-pills flex-column nav-container",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(h.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("orgmanage")),to:j.mc+"org/orgmanage/",onClick:function(){return e.tabItemClick("orgmanage")},children:[Object(b.jsx)("span",{className:"sf2-icon-info"}),Object(b.jsx)("span",{className:"nav-text",children:Object(j.nb)("Info")})]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(h.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("repoadmin")),to:j.mc+"org/repoadmin/",onClick:function(){return e.tabItemClick("repoadmin")},children:[Object(b.jsx)("span",{className:"sf2-icon-library"}),Object(b.jsx)("span",{className:"nav-text",children:Object(j.nb)("Libraries")})]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(h.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("users")||this.getActiveClass("admins")),to:j.mc+"org/useradmin/",onClick:function(){return e.tabItemClick("users")},children:[Object(b.jsx)("span",{className:"sf2-icon-user"}),Object(b.jsx)("span",{className:"nav-text",children:Object(j.nb)("Users")})]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(h.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("groupadmin")),to:j.mc+"org/groupadmin/",onClick:function(){return e.tabItemClick("groupadmin")},children:[Object(b.jsx)("span",{className:"sf2-icon-group"}),Object(b.jsx)("span",{className:"nav-text",children:Object(j.nb)("Groups")})]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(h.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("departmentadmin")),to:j.mc+"org/departmentadmin/",onClick:function(){return e.tabItemClick("departmentadmin")},children:[Object(b.jsx)("span",{className:"sf2-icon-organization"}),Object(b.jsx)("span",{className:"nav-text",children:Object(j.nb)("Departments")})]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(h.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("publinkadmin")),to:j.mc+"org/publinkadmin/",onClick:function(){return e.tabItemClick("publinkadmin")},children:[Object(b.jsx)("span",{className:"sf2-icon-link"}),Object(b.jsx)("span",{className:"nav-text",children:Object(j.nb)("Links")})]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(h.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("logadmin")||this.getActiveClass("file-update")||this.getActiveClass("perm-audit")),to:j.mc+"org/logadmin/",onClick:function(){return e.tabItemClick("logadmin")},children:[Object(b.jsx)("span",{className:"sf2-icon-clock"}),Object(b.jsx)("span",{className:"nav-text",children:Object(j.nb)("Logs")})]})})]})]})})})]})}}]),n}(o.a.Component),g=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).navItems=[{name:"all",urlPart:"useradmin",text:Object(j.nb)("All")},{name:"admins",urlPart:"useradmin/admins",text:Object(j.nb)("Admin")}],a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.currentItem;return Object(b.jsx)("div",{className:"cur-view-path tab-nav-container",children:Object(b.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,n){return Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.a,{to:"".concat(j.mc,"org/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},n)}))})})}}]),n}(o.a.Component),m=n(4),O=n(10),f=n(5),x=n(11),v=n(91),w=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).translateStatus=function(e){return"active"===e?Object(j.nb)("Active"):"inactive"===e?Object(j.nb)("Inactive"):void 0},e}return Object(a.a)(n,[{key:"render",value:function(){return Object(b.jsx)(v.a,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.statusArray,currentOption:this.props.currentStatus,onOptionChanged:this.props.onStatusChanged,translateOption:this.translateStatus})}}]),n}(o.a.Component),D=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onMouseEnter=function(){a.props.isItemFreezed||a.setState({showMenu:!0,highlight:!0})},a.onMouseLeave=function(){a.props.isItemFreezed||a.setState({showMenu:!1,highlight:!1})},a.toggleDelete=function(){var e=a.props.user.email;a.props.toggleDelete(e)},a.toggleResetPW=function(){var e=a.props.user,t=e.email,n=e.name;x.a.success(Object(j.nb)("Resetting user's password, please wait for a moment.")),O.a.orgAdminResetOrgUserPassword(j.Qb,t).then((function(e){var t;t=(t=(t=Object(j.nb)("Successfully reset password to %(passwd)s for user %(user)s.")).replace("%(passwd)s",e.data.new_password)).replace("%(user)s",n),x.a.success(t,{duration:15})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.toggleRevokeAdmin=function(){var e=a.props.user.email;a.props.toggleRevokeAdmin(e)},a.changeStatus=function(e){var t;t="active"==e?"true":"false",O.a.orgAdminChangeOrgUserStatus(j.Qb,a.props.user.email,t).then((function(e){a.setState({currentStatus:"true"==t?"active":"inactive",highlight:!1,showMenu:!1}),x.a.success(Object(j.nb)("Edit succeeded."))})).catch((function(e){var t=f.a.getErrorMsg(e);t===Object(j.nb)("Error")&&(t=Object(j.nb)("Edit failed.")),x.a.danger(t)}))},a.onDropdownToggleClick=function(e){e.preventDefault(),a.toggleOperationMenu(e)},a.toggleOperationMenu=function(e){e.stopPropagation(),a.setState({isItemMenuShow:!a.state.isItemMenuShow},(function(){a.state.isItemMenuShow?a.props.onFreezedItem():(a.setState({highlight:!1,showMenu:!1}),a.props.onUnfreezedItem())}))},a.getQuotaTotal=function(e){switch(e){case-1:return Object(j.nb)("Failed");case-2:return"--";default:return f.a.formatSize({bytes:e})}},a.state={highlight:!1,showMenu:!1,currentStatus:a.props.user.is_active?"active":"inactive",isItemMenuShow:!1},a.statusArray=["active","inactive"],a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.currentTab,s=j.mc+"org/useradmin/info/"+encodeURIComponent(t.email)+"/",a=t.email!==j.xc&&this.state.showMenu,r=a;return Object(b.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:s,children:t.name})}),Object(b.jsx)("td",{children:Object(b.jsx)(w,{isTextMode:!0,isEditIconShow:r,currentStatus:this.state.currentStatus,statusArray:this.statusArray,onStatusChanged:this.changeStatus})}),Object(b.jsx)("td",{children:"".concat(f.a.formatSize({bytes:t.quota_usage})," / ").concat(this.getQuotaTotal(t.quota_total))}),Object(b.jsxs)("td",{children:[t.ctime," /",Object(b.jsx)("br",{}),t.last_login?t.last_login:"--"]}),Object(b.jsx)("td",{className:"text-center cursor-pointer",children:a&&Object(b.jsxs)(m.l,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(b.jsx)(m.o,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(j.nb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),Object(b.jsxs)(m.n,{children:[Object(b.jsx)(m.m,{onClick:this.toggleDelete,children:Object(j.nb)("Delete")}),Object(b.jsx)(m.m,{onClick:this.toggleResetPW,children:Object(j.nb)("ResetPwd")}),"admins"==n&&Object(b.jsx)(m.m,{onClick:this.toggleRevokeAdmin,children:Object(j.nb)("Revoke Admin")})]})]})})]})}}]),n}(o.a.Component),S=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onFreezedItem=function(){a.setState({isItemFreezed:!0})},a.onUnfreezedItem=function(){a.setState({isItemFreezed:!1})},a.onChangePageNum=function(e,t){e.preventDefault();var n=a.props.page;1==t?n+=1:n-=1,a.props.initOrgUsersData(n)},a.sortByQuotaUsage=function(e){e.preventDefault(),a.props.sortByQuotaUsage()},a.state={isItemFreezed:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props,s=n.sortBy,a=n.sortOrder;e=""==s?Object(b.jsx)("span",{className:"fas fa-sort"}):Object(b.jsx)("span",{className:"fas ".concat("asc"==a?"fa-caret-up":"fa-caret-down")});var r=this.props,i=r.orgUsers,c=r.page,o=r.pageNext;return Object(b.jsxs)("div",{className:"cur-view-content",children:[Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"30%",children:Object(j.nb)("Name")}),Object(b.jsx)("th",{width:"15%",children:Object(j.nb)("Status")}),Object(b.jsxs)("th",{width:"20%",children:[Object(b.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByQuotaUsage,children:[Object(j.nb)("Space Used")," ",e]})," / ",Object(j.nb)("Quota")]}),Object(b.jsxs)("th",{width:"25%",children:[Object(j.nb)("Created At")," / ",Object(j.nb)("Last Login")]}),Object(b.jsx)("th",{width:"10%"})]})}),Object(b.jsx)("tbody",{children:i.map((function(e,n){return Object(b.jsx)(D,{user:e,currentTab:"users",isItemFreezed:t.state.isItemFreezed,toggleDelete:t.props.toggleDelete,onFreezedItem:t.onFreezedItem,onUnfreezedItem:t.onUnfreezedItem},n)}))})]}),Object(b.jsxs)("div",{className:"paginator",children:[1!=c&&Object(b.jsx)("a",{href:"#",onClick:function(e){return t.onChangePageNum(e,-1)},children:Object(j.nb)("Previous")}),1!=c&&o&&Object(b.jsx)("span",{children:" | "}),o&&Object(b.jsx)("a",{href:"#",onClick:function(e){return t.onChangePageNum(e,1)},children:Object(j.nb)("Next")})]})]})}}]),n}(o.a.Component),N=n(67),I=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"main-panel-north ".concat(this.props.children?"border-left-show":""),children:[Object(b.jsxs)("div",{className:"cur-view-toolbar",children:[Object(b.jsx)("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu"}),Object(b.jsx)("div",{className:"operation",children:this.props.children})]}),Object(b.jsxs)("div",{className:"common-toolbar",children:[this.props.search&&this.props.search,Object(b.jsx)(N.a,{isAdminPanel:!0})]})]})}}]),n}(c.Component),C=n(20),M=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleSubmit=function(){if(a.validateInputParams()){var e=a.state,t=e.email,n=e.name,s=e.password;a.setState({isAddingUser:!0}),a.props.handleSubmit(t,n.trim(),s)}},a.handleKeyPress=function(e){e.preventDefault(),"Enter"==e.key&&a.handleSubmit(e)},a.togglePasswordVisible=function(){a.setState({isPasswordVisible:!a.state.isPasswordVisible},(function(){a.state.isPasswordVisible?(a.passwdInput.type="password",a.passwdNewInput.type="password"):(a.passwdInput.type="text",a.passwdNewInput.type="text")}))},a.generatePassword=function(){var e=Math.random().toString(36).substr(5);a.setState({password:e,passwdnew:e,isPasswordVisible:!1},(function(){a.passwdInput.type="text",a.passwdNewInput.type="text"}))},a.inputEmail=function(e){var t=e.target.value.trim();a.setState({email:t})},a.inputName=function(e){var t=e.target.value;a.setState({name:t})},a.inputPassword=function(e){var t=e.target.value.trim();a.setState({password:t},(function(){a.state.isPasswordVisible&&(a.passwdInput.type="password",a.passwdNewInput.type="password")}))},a.inputPasswordNew=function(e){var t=e.target.value.trim();a.setState({passwdnew:t},(function(){a.state.isPasswordVisible&&(a.passwdInput.type="password",a.passwdNewInput.type="password")}))},a.toggle=function(){a.props.toggle()},a.state={isPasswordVisible:!0,email:"",name:"",password:"",passwdnew:"",errMessage:"",isAddingUser:!1},a.passwdInput=o.a.createRef(),a.passwdNewInput=o.a.createRef(),a}return Object(a.a)(n,[{key:"validateInputParams",value:function(){var e;if(!this.state.email.length)return e=Object(j.nb)("email is required"),this.setState({errMessage:e}),!1;if(!this.state.name.trim().length)return e=Object(j.nb)("Name is required"),this.setState({errMessage:e}),!1;var t=this.state.password,n=this.state.passwdnew;return t.length?n.length?t===n||(e=Object(j.nb)("Passwords don't match"),this.setState({errMessage:e}),!1):(e=Object(j.nb)("Please enter the password again"),this.setState({errMessage:e}),!1):(e=Object(j.nb)("Please enter password"),this.setState({errMessage:e}),!1)}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(m.x,{isOpen:!0,toggle:this.toggle,children:[Object(b.jsx)(m.A,{toggle:this.toggle,children:Object(j.nb)("Add User")}),Object(b.jsxs)(m.y,{children:[Object(b.jsxs)(m.p,{children:[Object(b.jsxs)(m.q,{children:[Object(b.jsx)(m.w,{for:"userEmail",children:Object(j.nb)("Email")}),Object(b.jsx)(m.s,{id:"userEmail",value:this.state.email||"",onChange:this.inputEmail})]}),Object(b.jsxs)(m.q,{children:[Object(b.jsx)(m.w,{for:"userName",children:Object(j.nb)("Name")}),Object(b.jsx)(m.s,{id:"userName",value:this.state.name||"",onChange:this.inputName})]}),Object(b.jsxs)(m.q,{children:[Object(b.jsx)(m.w,{for:"userPwd",children:Object(j.nb)("Password")}),Object(b.jsxs)(m.t,{className:"passwd",children:[Object(b.jsx)(m.s,{id:"userPwd",innerRef:function(t){e.passwdInput=t},value:this.state.password||"",onChange:this.inputPassword}),Object(b.jsxs)(m.u,{addonType:"append",children:[Object(b.jsx)(m.c,{onClick:this.togglePasswordVisible,children:Object(b.jsx)("i",{className:"link-operation-icon fas ".concat(this.state.isPasswordVisible?"fa-eye-slash":"fa-eye")})}),Object(b.jsx)(m.c,{onClick:this.generatePassword,children:Object(b.jsx)("i",{className:"link-operation-icon fas fa-magic"})})]})]})]}),Object(b.jsxs)(m.q,{children:[Object(b.jsx)(m.w,{for:"userPwdNew",children:Object(j.nb)("Confirm Password")}),Object(b.jsx)(m.s,{id:"userPwdNew",innerRef:function(t){e.passwdNewInput=t},className:"passwd",value:this.state.passwdnew||"",onChange:this.inputPasswordNew})]})]}),this.state.errMessage&&Object(b.jsx)(m.w,{className:"err-message",children:this.state.errMessage})]}),Object(b.jsx)(m.z,{children:Object(b.jsx)(m.c,{color:"primary",disabled:this.state.isAddingUser,onClick:this.handleSubmit,className:this.state.isAddingUser?"btn-loading":"",children:Object(j.nb)("Submit")})})]})}}]),n}(o.a.Component),y=n(135),k=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).copyLink=function(){Object(y.a)(a.props.invitationLink),a.props.toggle();var e=Object(j.nb)("Internal link has been copied to clipboard");x.a.success(e)},a}return Object(a.a)(n,[{key:"render",value:function(){return Object(b.jsxs)(m.x,{isOpen:!0,children:[Object(b.jsx)(m.A,{toggle:this.props.toggle,children:Object(j.nb)("Invite user")}),Object(b.jsxs)(m.y,{children:[Object(b.jsx)("p",{children:Object(j.nb)("Send the invitation link to the others, and they will be able to join the organization via scanning the QR code.")}),Object(b.jsx)("p",{children:this.props.invitationLink})]}),Object(b.jsx)(m.z,{children:Object(b.jsx)(m.c,{color:"primary",onClick:this.copyLink,children:Object(j.nb)("Copy")})})]})}}]),n}(o.a.Component),_=n(13),A=n.n(_);A.a.locale(j.Bb);var U=function e(t){Object(s.a)(this,e),this.id=t.id,this.name=t.name,this.email=t.email,this.contact_email=t.owner_contact_email,this.is_active=t.is_active,this.quota_usage=t.quota_usage,this.quota_total=t.quota_total,this.last_login=t.last_login?A()(t.last_login).fromNow():"--",this.ctime=A()(t.ctime).format("YYYY-MM-DD HH:mm:ss")},R=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleInputChange=function(e){a.setState({value:e.target.value})},a.handleKeyPress=function(e){"Enter"==e.key&&(e.preventDefault(),a.handleSubmit())},a.handleSubmit=function(){var e=a.state.value.trim();if(!e)return!1;a.props.submit(e)},a.state={value:""},a}return Object(a.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"input-icon",children:[Object(b.jsx)("i",{className:"d-flex input-icon-addon fas fa-search"}),Object(b.jsx)("input",{type:"text",className:"form-control search-input h-6 mr-1",style:{width:"15rem"},placeholder:this.props.placeholder,value:this.state.value,onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,autoComplete:"off"})]})}}]),n}(o.a.Component),z=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).sortByQuotaUsage=function(){a.setState({sortBy:"quota_usage",sortOrder:"asc"==a.state.sortOrder?"desc":"asc",page:1},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),n=a.state,s=n.page,r=n.sortBy,i=n.sortOrder;t.set("page",s),t.set("order_by",r),t.set("direction",i),e.search=t.toString(),Object(h.c)(e.toString()),a.initOrgUsersData(s)}))},a.toggleAddOrgUser=function(){a.setState({isShowAddOrgUserDialog:!a.state.isShowAddOrgUserDialog})},a.toggleInviteUserDialog=function(){a.setState({isInviteUserDialogOpen:!a.state.isInviteUserDialogOpen})},a.initOrgUsersData=function(e){var t=a.state,n=t.sortBy,s=t.sortOrder;O.a.orgAdminListOrgUsers(j.Qb,"",e,n,s).then((function(e){var t=e.data.user_list.map((function(e){return new U(e)}));a.setState({orgUsers:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.addOrgUser=function(e,t,n){O.a.orgAdminAddOrgUser(j.Qb,e,t,n).then((function(t){var n=new U(t.data);a.state.orgUsers.unshift(n),a.setState({orgUsers:a.state.orgUsers}),a.toggleAddOrgUser();var s=Object(j.nb)("successfully added user %s.");s=s.replace("%s",e),x.a.success(s)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t),a.toggleAddOrgUser()}))},a.toggleOrgUsersDelete=function(e){O.a.orgAdminDeleteOrgUser(j.Qb,e).then((function(t){var n=a.state.orgUsers.filter((function(t){return t.email!=e}));a.setState({orgUsers:n});var s=Object(j.nb)("Successfully deleted %s");s=s.replace("%s",e),x.a.success(s)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.searchItems=function(e){Object(h.c)("".concat(j.mc,"org/useradmin/search-users/?query=").concat(encodeURIComponent(e)))},a.getSearch=function(){return Object(b.jsx)(R,{placeholder:Object(j.nb)("Search users"),submit:a.searchItems})},a.state={orgUsers:[],page:1,pageNext:!1,sortBy:"",sortOrder:"asc",isShowAddOrgUserDialog:!1,isInviteUserDialogOpen:!1},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,s=n.page,a=n.sortBy,r=n.sortOrder;this.setState({page:parseInt(t.get("page")||s),sortBy:t.get("order_by")||a,sortOrder:t.get("direction")||r},(function(){e.initOrgUsersData(e.state.page)}))}},{key:"render",value:function(){var e,t="btn btn-secondary operation-item";return e=Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("button",{className:t,title:Object(j.nb)("Add user"),onClick:this.toggleAddOrgUser,children:[Object(b.jsx)("i",{className:"fas fa-plus-square text-secondary mr-1"}),Object(j.nb)("Add user")]}),j.tb&&Object(b.jsxs)("button",{className:t,title:Object(j.nb)("Invite user"),onClick:this.toggleInviteUserDialog,children:[Object(b.jsx)("i",{className:"fas fa-plus-square text-secondary mr-1"}),Object(j.nb)("Invite user")]}),this.state.isShowAddOrgUserDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(M,{handleSubmit:this.addOrgUser,toggle:this.toggleAddOrgUser})}),this.state.isInviteUserDialogOpen&&Object(b.jsx)(C.a,{children:Object(b.jsx)(k,{invitationLink:j.tb,toggle:this.toggleInviteUserDialog})})]}),Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{children:e,search:this.getSearch()}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)(g,{currentItem:"all"}),Object(b.jsx)(S,{initOrgUsersData:this.initOrgUsersData,toggleDelete:this.toggleOrgUsersDelete,orgUsers:this.state.orgUsers,page:this.state.page,pageNext:this.state.pageNext,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortByQuotaUsage:this.sortByQuotaUsage})]})})]})}}]),n}(c.Component),L=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onFreezedItem=function(){a.setState({isItemFreezed:!0})},a.onUnfreezedItem=function(){a.setState({isItemFreezed:!1})},a.state={isItemFreezed:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props.orgUsers;return Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"30%",children:Object(j.nb)("Name")}),Object(b.jsx)("th",{width:"15%",children:Object(j.nb)("Status")}),Object(b.jsxs)("th",{width:"20%",children:[Object(b.jsx)("a",{className:"d-inline-block table-sort-op",href:"#",children:Object(j.nb)("Space Used")})," / ",Object(j.nb)("Quota")]}),Object(b.jsxs)("th",{width:"25%",children:[Object(j.nb)("Created At")," / ",Object(j.nb)("Last Login")]}),Object(b.jsx)("th",{width:"10%"})]})}),Object(b.jsx)("tbody",{children:t.map((function(t,n){return Object(b.jsx)(D,{user:t,currentTab:"users",isItemFreezed:e.state.isItemFreezed,toggleDelete:e.props.toggleDelete,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem},n)}))})]})})}}]),n}(o.a.Component),F=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).getItems=function(){O.a.orgAdminSearchUser(j.Qb,a.state.query.trim()).then((function(e){var t=e.data.user_list.map((function(e){return new U(e)}));a.setState({orgUsers:t,loading:!1})})).catch((function(e){a.setState({loading:!1,errorMsg:f.a.getErrorMsg(e,!0)})}))},a.deleteUser=function(e){O.a.orgAdminDeleteOrgUser(j.Qb,e).then((function(t){var n=a.state.orgUsers.filter((function(t){return t.email!=e}));a.setState({orgUsers:n}),x.a.success(Object(j.nb)("Successfully deleted 1 item."))})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.updateUser=function(e,t,n){O.a.sysAdminUpdateUser(e,t,n).then((function(s){var r=a.state.orgUsers.map((function(n){return n.email==e&&(n[t]=s.data[t]),n}));a.setState({orgUsers:r});var i="is_active"==t&&n?s.data.update_status_tip:Object(j.nb)("Edit succeeded");x.a.success(i)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.handleInputChange=function(e){a.setState({query:e.target.value},a.checkSubmitBtnActive)},a.checkSubmitBtnActive=function(){var e=a.state.query;a.setState({isSubmitBtnActive:e.trim()})},a.state={query:"",orgUsers:[],org_id:"",isSubmitBtnActive:!1,loading:!0,errorMsg:""},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new URL(document.location).searchParams;this.setState({query:t.get("query")||""},(function(){e.getItems()}))}},{key:"render",value:function(){var e=this.state,t=e.query,n=e.isSubmitBtnActive;return Object(b.jsx)(c.Fragment,{children:Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.nb)("Users")})}),Object(b.jsxs)("div",{className:"cur-view-content",children:[Object(b.jsxs)("div",{className:"mt-4 mb-6",children:[Object(b.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(j.nb)("Search Users")}),Object(b.jsxs)(m.p,{children:[Object(b.jsx)(m.q,{row:!0,children:Object(b.jsx)(m.i,{sm:5,children:Object(b.jsx)(m.s,{type:"text",name:"query",value:t,placeholder:Object(j.nb)("Search users"),onChange:this.handleInputChange})})}),Object(b.jsx)(m.q,{row:!0,children:Object(b.jsx)(m.i,{sm:{size:5},children:Object(b.jsx)("button",{className:"btn btn-outline-primary",disabled:!n,onClick:this.getItems,children:Object(j.nb)("Submit")})})})]})]}),Object(b.jsxs)("div",{className:"mt-4 mb-6",children:[Object(b.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(j.nb)("Result")}),Object(b.jsx)(L,{toggleDelete:this.deleteUser,orgUsers:this.state.orgUsers})]})]})]})})})}}]),n}(c.Component),E=(n(1582),function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onFreezedItem=function(){a.setState({isItemFreezed:!0})},a.onUnfreezedItem=function(){a.setState({isItemFreezed:!1})},a.state={isItemFreezed:!1},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.props.initOrgAdmin()}},{key:"render",value:function(){var e=this,t=this.props.orgAdminUsers;return Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"30%",children:Object(j.nb)("Name")}),Object(b.jsx)("th",{width:"15%",children:Object(j.nb)("Status")}),Object(b.jsxs)("th",{width:"20%",children:[Object(j.nb)("Space Used")," / ",Object(j.nb)("Quota")]}),Object(b.jsxs)("th",{width:"25%",children:[Object(j.nb)("Created At")," / ",Object(j.nb)("Last Login")]}),Object(b.jsx)("th",{width:"10%"})]})}),Object(b.jsx)("tbody",{children:t.map((function(t){return Object(b.jsx)(D,{user:t,currentTab:"admins",isItemFreezed:e.state.isItemFreezed,toggleDelete:e.props.toggleDelete,toggleRevokeAdmin:e.props.toggleRevokeAdmin,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem},t.index)}))})]})})}}]),n}(o.a.Component)),P=n(52),G=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleSelectChange=function(e){a.setState({selectedOption:e,errMessage:""}),a.options=[]},a.addOrgAdmin=function(){if(a.state.selectedOption){var e=a.state.selectedOption.email;O.a.orgAdminSetOrgAdmin(j.Qb,e,!0).then((function(e){var t=new U(e.data);a.props.onAddedOrgAdmin(t)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))}},a.toggle=function(){a.props.toggle()},a.state={selectedOption:null,errMessage:""},a.options=[],a}return Object(a.a)(n,[{key:"render",value:function(){return Object(b.jsxs)(m.x,{isOpen:!0,toggle:this.toggle,children:[Object(b.jsx)(m.A,{toggle:this.toggle,children:Object(j.nb)("Add Admins")}),Object(b.jsxs)(m.y,{children:[Object(b.jsx)(P.a,{ref:"userSelect",isMulti:!1,className:"reviewer-select",placeholder:Object(j.nb)("Select a user as admin..."),onSelectChange:this.handleSelectChange}),this.state.errMessage&&Object(b.jsx)(m.a,{color:"danger",className:"mt-2",children:this.state.errMessage})]}),Object(b.jsxs)(m.z,{children:[Object(b.jsx)(m.c,{color:"secondary",onClick:this.toggle,children:Object(j.nb)("Close")}),Object(b.jsx)(m.c,{color:"primary",onClick:this.addOrgAdmin,children:Object(j.nb)("Submit")})]})]})}}]),n}(o.a.Component),T=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).toggleAddOrgAdmin=function(){a.setState({isShowAddOrgAdminDialog:!a.state.isShowAddOrgAdminDialog})},a.initOrgAdmin=function(){O.a.orgAdminListOrgUsers(j.Qb,!0).then((function(e){var t=e.data.user_list.map((function(e){return new U(e)}));a.setState({orgAdminUsers:t})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.toggleOrgAdminDelete=function(e){O.a.orgAdminDeleteOrgUser(j.Qb,e).then((function(t){a.setState({orgAdminUsers:a.state.orgAdminUsers.filter((function(t){return t.email!=e}))});var n=Object(j.nb)("Successfully deleted %s");n=n.replace("%s",e),x.a.success(n)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.toggleRevokeAdmin=function(e){O.a.orgAdminSetOrgAdmin(j.Qb,e,!1).then((function(t){a.setState({orgAdminUsers:a.state.orgAdminUsers.filter((function(t){return t.email!=e}))});var n=Object(j.nb)("Successfully revoke the admin permission of %s");n=n.replace("%s",t.data.name),x.a.success(n)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.onAddedOrgAdmin=function(e){a.state.orgAdminUsers.unshift(e),a.setState({orgAdminUsers:a.state.orgAdminUsers});var t=Object(j.nb)("Successfully set %s as admin.");t=t.replace("%s",e.email),x.a.success(t),a.toggleAddOrgAdmin()},a.state={orgAdminUsers:[],isShowAddOrgAdminDialog:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e;return e=Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("button",{className:"btn btn-secondary operation-item",title:Object(j.nb)("Add admin"),onClick:this.toggleAddOrgAdmin,children:[Object(b.jsx)("i",{className:"fas fa-plus-square text-secondary mr-1"}),Object(j.nb)("Add admin")]}),this.state.isShowAddOrgAdminDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(G,{toggle:this.toggleAddOrgAdmin,onAddedOrgAdmin:this.onAddedOrgAdmin})})]}),Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{children:e}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)(g,{currentItem:"admins"}),Object(b.jsx)(E,{currentTab:"admins",toggleDelete:this.toggleOrgAdminDelete,toggleRevokeAdmin:this.toggleRevokeAdmin,orgAdminUsers:this.state.orgAdminUsers,initOrgAdmin:this.initOrgAdmin})]})})]})}}]),n}(c.Component),Q=n(16),q=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.email,n=e.currentItem,s="".concat(j.mc,"org/useradmin/info/").concat(encodeURIComponent(t),"/");return Object(b.jsx)("div",{className:"cur-view-path org-admin-user-nav",children:Object(b.jsxs)("ul",{className:"nav",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.a,{to:s,className:"nav-link".concat("profile"==n?" active":""),children:Object(j.nb)("Profile")})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.a,{to:"".concat(s,"repos/"),className:"nav-link".concat("owned-repos"==n?" active":""),children:Object(j.nb)("Owned Libraries")})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.a,{to:"".concat(s,"shared-repos/"),className:"nav-link".concat("shared-repos"==n?" active":""),children:Object(j.nb)("Shared Libraries")})})]})})}}]),n}(o.a.Component),B=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.formSubmit=function(){var e=a.props,t=e.orgID,n=e.email,s=a.state.inputValue.trim();a.setState({submitBtnDisabled:!0}),O.a.orgAdminSetOrgUserName(t,n,s).then((function(e){var t=s?e.data.name:"";a.props.updateName(t),a.props.toggleDialog()})).catch((function(e){var t=f.a.getErrorMsg(e);a.setState({formErrorMsg:t,submitBtnDisabled:!1})}))},a.state={inputValue:a.props.name,submitBtnDisabled:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.state,t=e.inputValue,n=e.formErrorMsg,s=e.submitBtnDisabled;return Object(b.jsxs)(m.x,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog,children:[Object(b.jsx)(m.A,{toggle:this.props.toggleDialog,children:Object(j.nb)("Set user name")}),Object(b.jsx)(m.y,{children:Object(b.jsxs)(o.a.Fragment,{children:[Object(b.jsx)("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),n&&Object(b.jsx)("p",{className:"error m-0 mt-2",children:n})]})}),Object(b.jsxs)(m.z,{children:[Object(b.jsx)("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog,children:Object(j.nb)("Cancel")}),Object(b.jsx)("button",{className:"btn btn-primary",disabled:s,onClick:this.formSubmit,children:Object(j.nb)("Submit")})]})]})}}]),n}(o.a.Component),H=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.formSubmit=function(){var e=a.props,t=e.orgID,n=e.email,s=a.state.inputValue.trim();a.setState({submitBtnDisabled:!0}),O.a.orgAdminSetOrgUserContactEmail(t,n,s).then((function(e){var t=s?e.data.contact_email:"";a.props.updateContactEmail(t),a.props.toggleDialog()})).catch((function(e){var t=f.a.getErrorMsg(e);a.setState({formErrorMsg:t,submitBtnDisabled:!1})}))},a.state={inputValue:a.props.contactEmail,submitBtnDisabled:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.state,t=e.inputValue,n=e.formErrorMsg,s=e.submitBtnDisabled;return Object(b.jsxs)(m.x,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog,children:[Object(b.jsx)(m.A,{toggle:this.props.toggleDialog,children:Object(j.nb)("Set user contact email")}),Object(b.jsx)(m.y,{children:Object(b.jsxs)(o.a.Fragment,{children:[Object(b.jsx)("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),n&&Object(b.jsx)("p",{className:"error m-0 mt-2",children:n})]})}),Object(b.jsxs)(m.z,{children:[Object(b.jsx)("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog,children:Object(j.nb)("Cancel")}),Object(b.jsx)("button",{className:"btn btn-primary",disabled:s,onClick:this.formSubmit,children:Object(j.nb)("Submit")})]})]})}}]),n}(o.a.Component),Y=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;Object(s.a)(this,n),(a=t.call(this,e)).handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.formSubmit=function(){var e=a.props,t=e.orgID,n=e.email,s=a.state.inputValue.trim();if(!s)return a.setState({formErrorMsg:Object(j.nb)("It is required.")}),!1;a.setState({submitBtnDisabled:!0}),O.a.orgAdminSetOrgUserQuota(t,n,s).then((function(e){a.props.updateQuota(e.data.quota_total),a.props.toggleDialog()})).catch((function(e){var t=f.a.getErrorMsg(e);a.setState({formErrorMsg:t,submitBtnDisabled:!1})}))};var r=a.props.quotaTotal<0?"":a.props.quotaTotal/1e6;return a.state={inputValue:r,submitBtnDisabled:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.state,t=e.inputValue,n=e.formErrorMsg,s=e.submitBtnDisabled;return Object(b.jsxs)(m.x,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog,children:[Object(b.jsx)(m.A,{toggle:this.props.toggleDialog,children:Object(j.nb)("Set user quota")}),Object(b.jsx)(m.y,{children:Object(b.jsxs)(o.a.Fragment,{children:[Object(b.jsxs)(m.t,{children:[Object(b.jsx)("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),Object(b.jsx)(m.u,{addonType:"append",children:Object(b.jsx)(m.v,{children:"MB"})})]}),Object(b.jsx)("p",{className:"small text-secondary mt-2 mb-2",children:Object(j.nb)("Tip: 0 means default limit")}),n&&Object(b.jsx)("p",{className:"error m-0 mt-2",children:n})]})}),Object(b.jsxs)(m.z,{children:[Object(b.jsx)("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog,children:Object(j.nb)("Cancel")}),Object(b.jsx)("button",{className:"btn btn-primary",disabled:s,onClick:this.formSubmit,children:Object(j.nb)("Submit")})]})]})}}]),n}(o.a.Component),V=(n(237),window.org.pageOptions),K=V.orgID,W=V.orgName,J=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).updateName=function(e){a.setState({name:e})},a.updateContactEmail=function(e){a.setState({contact_email:e})},a.updateQuota=function(e){a.setState({quota_total:e})},a.state={loading:!0,errorMsg:""},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;O.a.orgAdminGetOrgUserInfo(K,this.props.email).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)(q,{email:this.props.email,currentItem:"profile"}),Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsx)($,{data:this.state,updateName:this.updateName,updateContactEmail:this.updateContactEmail,updateQuota:this.updateQuota})})]})})]})}}]),n}(c.Component),$=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).toggleSetNameDialog=function(){a.setState({isSetNameDialogOpen:!a.state.isSetNameDialogOpen})},a.toggleSetContactEmailDialog=function(){a.setState({isSetContactEmailDialogOpen:!a.state.isSetContactEmailDialogOpen})},a.toggleSetQuotaDialog=function(){a.setState({isSetQuotaDialogOpen:!a.state.isSetQuotaDialogOpen})},a.state={isSetNameDialogOpen:!1,isSetContactEmailDialogOpen:!1,isSetQuotaDialogOpen:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.data,t=e.loading,n=e.errorMsg,s=e.avatar_url,a=e.email,r=e.contact_email,i=e.name,o=e.quota_total,l=e.quota_usage,d=this.state,h=d.isSetNameDialogOpen,u=d.isSetContactEmailDialogOpen,p=d.isSetQuotaDialogOpen;return t?Object(b.jsx)(Q.a,{}):n?Object(b.jsx)("p",{className:"error text-center",children:n}):Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("dl",{children:[Object(b.jsx)("dt",{children:Object(j.nb)("Avatar")}),Object(b.jsx)("dd",{children:Object(b.jsx)("img",{src:s,width:"48",height:"48",className:"rounded",alt:""})}),Object(b.jsx)("dt",{children:"ID"}),Object(b.jsx)("dd",{children:a}),Object(b.jsx)("dt",{children:Object(j.nb)("Name")}),Object(b.jsxs)("dd",{children:[i||"--",Object(b.jsx)("span",{title:Object(j.nb)("Edit"),className:"attr-action-icon fa fa-pencil-alt",onClick:this.toggleSetNameDialog})]}),Object(b.jsx)("dt",{children:Object(j.nb)("Contact Email")}),Object(b.jsxs)("dd",{children:[r||"--",Object(b.jsx)("span",{title:Object(j.nb)("Edit"),className:"attr-action-icon fa fa-pencil-alt",onClick:this.toggleSetContactEmailDialog})]}),Object(b.jsx)("dt",{children:Object(j.nb)("Organization")}),Object(b.jsx)("dd",{children:W}),Object(b.jsx)("dt",{children:Object(j.nb)("Space Used / Quota")}),Object(b.jsxs)("dd",{children:["".concat(f.a.bytesToSize(l)).concat(o>0?" / "+f.a.bytesToSize(o):""),Object(b.jsx)("span",{title:Object(j.nb)("Edit"),className:"attr-action-icon fa fa-pencil-alt",onClick:this.toggleSetQuotaDialog})]})]}),h&&Object(b.jsx)(B,{orgID:K,email:a,name:i,updateName:this.props.updateName,toggleDialog:this.toggleSetNameDialog}),u&&Object(b.jsx)(H,{orgID:K,email:a,contactEmail:r,updateContactEmail:this.props.updateContactEmail,toggleDialog:this.toggleSetContactEmailDialog}),p&&Object(b.jsx)(Y,{orgID:K,email:a,quotaTotal:o,updateQuota:this.props.updateQuota,toggleDialog:this.toggleSetQuotaDialog})]})}}]),n}(c.Component),X=J,Z=n(152),ee=window.org.pageOptions.orgID,te=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={loading:!0,errorMsg:""},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;O.a.orgAdminGetOrgUserOwnedRepos(ee,this.props.email).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)(q,{email:this.props.email,currentItem:"owned-repos"}),Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsx)(ne,{data:this.state})})]})})]})}}]),n}(c.Component),ne=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.data,t=e.loading,n=e.errorMsg,s=e.repo_list;return t?Object(b.jsx)(Q.a,{}):n?Object(b.jsx)("p",{className:"error text-center",children:n}):Object(b.jsx)(c.Fragment,{children:Object(b.jsxs)("table",{className:"table-hover",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"4%"}),Object(b.jsx)("th",{width:"35%",children:Object(j.nb)("Name")}),Object(b.jsx)("th",{width:"16%",children:Object(j.nb)("Size")}),Object(b.jsx)("th",{width:"25%",children:Object(j.nb)("Last Update")}),Object(b.jsx)("th",{width:"20%"})]})}),Object(b.jsx)("tbody",{children:s.map((function(e,t){return Object(b.jsx)(se,{data:e},t)}))})]})})}}]),n}(c.Component),se=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleMouseOver=function(){a.setState({isOpIconShown:!0})},a.handleMouseOut=function(){a.setState({isOpIconShown:!1})},a.handleDeleteIconClick=function(e){e.preventDefault(),a.toggleDeleteRepoDialog()},a.toggleDeleteRepoDialog=function(){a.setState({isDeleteRepoDialogOpen:!a.state.isDeleteRepoDialogOpen})},a.deleteRepo=function(){var e=a.props.data;O.a.orgAdminDeleteOrgRepo(ee,e.repo_id).then((function(t){a.setState({deleted:!0,isRepoDeleted:!0});var n=Object(j.nb)("Successfully deleted {name}.").replace("{name}",e.repo_name);x.a.success(n)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t),a.setState({isRepoDeleted:!1})}))},a.state={isOpIconShown:!1,deleted:!1,isDeleteRepoDialogOpen:!1,isRepoDeleted:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.state,t=e.deleted,n=e.isOpIconShown,s=e.isDeleteRepoDialogOpen,a=this.props.data;return t?null:Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[Object(b.jsx)("td",{children:Object(b.jsx)("img",{src:f.a.getLibIconUrl(a,!1),alt:f.a.getLibIconTitle(a),title:f.a.getLibIconTitle(a),width:"24"})}),Object(b.jsx)("td",{children:a.repo_name}),Object(b.jsx)("td",{children:f.a.bytesToSize(a.size)}),Object(b.jsx)("td",{title:A()(a.last_modified).format("LLLL"),children:A()(a.last_modified).format("YYYY-MM-DD")}),Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:"#",className:"action-icon sf2-icon-delete".concat(n?"":" invisible"),title:Object(j.nb)("Delete"),onClick:this.handleDeleteIconClick})})]}),s&&Object(b.jsx)(Z.a,{repo:a,isRepoDeleted:this.state.isRepoDeleted,onDeleteRepo:this.deleteRepo,toggle:this.toggleDeleteRepoDialog})]})}}]),n}(c.Component),ae=te,re=window.org.pageOptions.orgID,ie=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={loading:!0,errorMsg:""},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;O.a.orgAdminGetOrgUserBesharedRepos(re,this.props.email).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)(q,{email:this.props.email,currentItem:"shared-repos"}),Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsx)(ce,{data:this.state})})]})})]})}}]),n}(c.Component),ce=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.data,t=e.loading,n=e.errorMsg,s=e.repo_list;return t?Object(b.jsx)(Q.a,{}):n?Object(b.jsx)("p",{className:"error text-center",children:n}):Object(b.jsxs)("table",{className:"table-hover",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"4%"}),Object(b.jsx)("th",{width:"30%",children:Object(j.nb)("Name")}),Object(b.jsx)("th",{width:"26%",children:Object(j.nb)("Owner")}),Object(b.jsx)("th",{width:"15%",children:Object(j.nb)("Size")}),Object(b.jsx)("th",{width:"25%",children:Object(j.nb)("Last Update")})]})}),Object(b.jsx)("tbody",{children:s.map((function(e,t){return Object(b.jsx)(oe,{data:e},t)}))})]})}}]),n}(c.Component),oe=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.data;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)("img",{src:f.a.getLibIconUrl(e,!1),alt:f.a.getLibIconTitle(e),title:f.a.getLibIconTitle(e),width:"24"})}),Object(b.jsx)("td",{children:e.repo_name}),Object(b.jsx)("td",{children:e.owner_name}),Object(b.jsx)("td",{children:f.a.bytesToSize(e.size)}),Object(b.jsx)("td",{title:A()(e.last_modified).format("LLLL"),children:A()(e.last_modified).format("YYYY-MM-DD")})]})}}]),n}(c.Component),le=ie;A.a.locale(j.Bb);var de=function e(t){Object(s.a)(this,e),this.id=t.id,this.groupName=t.group_name,this.creatorName=t.creator_name,this.creatorEmail=t.creator_email,this.creatorContactEmail=t.creator_contact_email,this.ctime=A()(t.ctime).format("YYYY-MM-DD HH:mm:ss")},he=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleInputChange=function(e){a.setState({value:e.target.value})},a.handleKeyPress=function(e){"Enter"==e.key&&(e.preventDefault(),a.handleSubmit())},a.handleSubmit=function(){var e=a.state.value.trim();if(!e)return!1;a.props.submit(e)},a.state={value:""},a}return Object(a.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"input-icon",children:[Object(b.jsx)("i",{className:"d-flex input-icon-addon fas fa-search"}),Object(b.jsx)("input",{type:"text",className:"form-control search-input h-6 mr-1",style:{width:"15rem"},placeholder:this.props.placeholder,value:this.state.value,onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,autoComplete:"off"})]})}}]),n}(o.a.Component),je=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).initData=function(e){O.a.orgAdminListOrgGroups(j.Qb,e).then((function(e){var t=e.data.groups.map((function(e){return new de(e)}));a.setState({orgGroups:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.onChangePageNum=function(e,t){e.preventDefault();var n=a.state.page;1==t?n+=1:n-=1,a.initData(n)},a.onFreezedItem=function(){a.setState({isItemFreezed:!0})},a.onUnfreezedItem=function(){a.setState({isItemFreezed:!1})},a.deleteGroupItem=function(e){O.a.orgAdminDeleteOrgGroup(j.Qb,e.id).then((function(t){a.setState({orgGroups:a.state.orgGroups.filter((function(t){return t.id!=e.id}))});var n=Object(j.nb)("Successfully deleted {name}");n=n.replace("{name}",e.groupName),x.a.success(n)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.searchItems=function(e){Object(h.c)("".concat(j.mc,"org/groupadmin/search-groups/?query=").concat(encodeURIComponent(e)))},a.getSearch=function(){return Object(b.jsx)(he,{placeholder:Object(j.nb)("Search groups by name"),submit:a.searchItems})},a.state={page:1,pageNext:!1,orgGroups:[],isItemFreezed:!1},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.state.page;this.initData(e)}},{key:"render",value:function(){var e=this,t=this.state.orgGroups;return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{search:this.getSearch()}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.nb)("All Groups")})}),Object(b.jsxs)("div",{className:"cur-view-content",children:[Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"30%",children:Object(j.nb)("Name")}),Object(b.jsx)("th",{width:"35%",children:Object(j.nb)("Creator")}),Object(b.jsx)("th",{width:"23%",children:Object(j.nb)("Created At")}),Object(b.jsx)("th",{width:"12%",className:"text-center",children:Object(j.nb)("Operations")})]})}),Object(b.jsx)("tbody",{children:t.map((function(t){return Object(b.jsx)(ue,{group:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteGroupItem:e.deleteGroupItem},t.id)}))})]}),Object(b.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(j.nb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(b.jsx)("span",{children:" | "}),this.state.pageNext&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(j.nb)("Next")})]})]})]})})]})}}]),n}(c.Component),ue=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onMouseEnter=function(){a.props.isItemFreezed||a.setState({showMenu:!0,highlight:!0})},a.onMouseLeave=function(){a.props.isItemFreezed||a.setState({showMenu:!1,highlight:!1})},a.onDropdownToggleClick=function(e){e.preventDefault(),a.toggleOperationMenu(e)},a.toggleOperationMenu=function(e){e.stopPropagation(),a.setState({isItemMenuShow:!a.state.isItemMenuShow},(function(){a.state.isItemMenuShow?a.props.onFreezedItem():(a.setState({highlight:!1,showMenu:!1}),a.props.onUnfreezedItem())}))},a.toggleDelete=function(){a.props.deleteGroupItem(a.props.group)},a.renderGroupHref=function(e){return"system admin"==e.creatorName?j.mc+"org/departmentadmin/groups/"+e.id+"/":j.mc+"org/groupadmin/"+e.id+"/"},a.renderGroupCreator=function(e){var t=j.mc+"org/useradmin/info/"+e.creatorEmail+"/";return"system admin"==e.creatorName?Object(b.jsx)("td",{children:" -- "}):Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:t,className:"font-weight-normal",children:e.creatorName})})},a.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.group,t="system admin"!=e.creatorName&&this.state.showMenu;return Object(b.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:this.renderGroupHref(e),className:"font-weight-normal",children:e.groupName})}),this.renderGroupCreator(e),Object(b.jsx)("td",{children:e.ctime}),Object(b.jsx)("td",{className:"text-center cursor-pointer",children:t&&Object(b.jsxs)(m.l,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(b.jsx)(m.o,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(j.nb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),Object(b.jsx)(m.n,{children:Object(b.jsx)(m.m,{onClick:this.toggleDelete,children:Object(j.nb)("Delete")})})]})})]})}}]),n}(o.a.Component),be=je,pe=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onMouseEnter=function(){a.props.isItemFreezed||a.setState({showMenu:!0,highlight:!0})},a.onMouseLeave=function(){a.props.isItemFreezed||a.setState({showMenu:!1,highlight:!1})},a.onDropdownToggleClick=function(e){e.preventDefault(),a.toggleOperationMenu(e)},a.toggleOperationMenu=function(e){e.stopPropagation(),a.setState({isItemMenuShow:!a.state.isItemMenuShow},(function(){a.state.isItemMenuShow?a.props.onFreezedItem():(a.setState({highlight:!1,showMenu:!1}),a.props.onUnfreezedItem())}))},a.toggleDelete=function(){a.props.deleteGroupItem(a.props.group)},a.renderGroupHref=function(e){return"system admin"==e.creatorName?j.mc+"org/departmentadmin/groups/"+e.id+"/":j.mc+"org/groupadmin/"+e.id+"/"},a.renderGroupCreator=function(e){var t=j.mc+"org/useradmin/info/"+e.creatorEmail+"/";return"system admin"==e.creatorName?Object(b.jsx)("td",{children:" -- "}):Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:t,className:"font-weight-normal",children:e.creatorName})})},a.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.group,t="system admin"!=e.creatorName&&this.state.showMenu;return Object(b.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:this.renderGroupHref(e),className:"font-weight-normal",children:e.groupName})}),this.renderGroupCreator(e),Object(b.jsx)("td",{children:e.ctime}),Object(b.jsx)("td",{className:"text-center cursor-pointer",children:t&&Object(b.jsxs)(m.l,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(b.jsx)(m.o,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(j.nb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),Object(b.jsx)(m.n,{children:Object(b.jsx)(m.m,{onClick:this.toggleDelete,children:Object(j.nb)("Delete")})})]})})]})}}]),n}(o.a.Component),ge=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onFreezedItem=function(){a.setState({isItemFreezed:!0})},a.onUnfreezedItem=function(){a.setState({isItemFreezed:!1})},a.state={isItemFreezed:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props.orgGroups;return Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"30%",children:Object(j.nb)("Name")}),Object(b.jsx)("th",{width:"35%",children:Object(j.nb)("Creator")}),Object(b.jsx)("th",{width:"23%",children:Object(j.nb)("Created At")}),Object(b.jsx)("th",{width:"12%",className:"text-center",children:Object(j.nb)("Operations")})]})}),Object(b.jsx)("tbody",{children:t.map((function(t){return Object(b.jsx)(pe,{group:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteGroupItem:e.props.toggleDelete},t.id)}))})]})})}}]),n}(o.a.Component),me=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).getItems=function(){O.a.orgAdminSearchGroup(j.Qb,a.state.query.trim()).then((function(e){var t=e.data.group_list.map((function(e){return new de(e)}));a.setState({orgGroups:t,loading:!1})})).catch((function(e){a.setState({loading:!1,errorMsg:f.a.getErrorMsg(e,!0)})}))},a.deleteGroupItem=function(e){O.a.orgAdminDeleteOrgGroup(j.Qb,e.id).then((function(t){a.setState({orgGroups:a.state.orgGroups.filter((function(t){return t.id!=e.id}))});var n=Object(j.nb)("Successfully deleted {name}");n=n.replace("{name}",e.groupName),x.a.success(n)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.handleInputChange=function(e){a.setState({query:e.target.value},a.checkSubmitBtnActive)},a.checkSubmitBtnActive=function(){var e=a.state.query;a.setState({isSubmitBtnActive:e.trim()})},a.state={query:"",orgGroups:[],isSubmitBtnActive:!1,loading:!0,errorMsg:""},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new URL(document.location).searchParams;this.setState({query:t.get("query")||""},(function(){e.getItems()}))}},{key:"render",value:function(){var e=this.state,t=e.query,n=e.isSubmitBtnActive;return Object(b.jsx)(c.Fragment,{children:Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.nb)("Groups")})}),Object(b.jsxs)("div",{className:"cur-view-content",children:[Object(b.jsxs)("div",{className:"mt-4 mb-6",children:[Object(b.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(j.nb)("Search Groups")}),Object(b.jsxs)(m.p,{children:[Object(b.jsx)(m.q,{row:!0,children:Object(b.jsx)(m.i,{sm:5,children:Object(b.jsx)(m.s,{type:"text",name:"query",value:t,placeholder:Object(j.nb)("Search groups"),onChange:this.handleInputChange})})}),Object(b.jsx)(m.q,{row:!0,children:Object(b.jsx)(m.i,{sm:{size:5},children:Object(b.jsx)("button",{className:"btn btn-outline-primary",disabled:!n,onClick:this.getItems,children:Object(j.nb)("Submit")})})})]})]}),Object(b.jsxs)("div",{className:"mt-4 mb-6",children:[Object(b.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(j.nb)("Result")}),Object(b.jsx)(ge,{toggleDelete:this.deleteGroupItem,orgGroups:this.state.orgGroups})]})]})]})})})}}]),n}(c.Component),Oe=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.groupID,n=e.currentItem,s="".concat(j.mc,"org/groupadmin/").concat(t,"/");return Object(b.jsx)("div",{className:"cur-view-path org-admin-user-nav",children:Object(b.jsxs)("ul",{className:"nav",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.a,{to:s,className:"nav-link".concat("info"==n?" active":""),children:Object(j.nb)("Group Info")})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.a,{to:"".concat(s,"repos/"),className:"nav-link".concat("repos"==n?" active":""),children:Object(j.nb)("Libraries")})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.a,{to:"".concat(s,"members/"),className:"nav-link".concat("members"==n?" active":""),children:Object(j.nb)("Members")})})]})})}}]),n}(o.a.Component),fe=window.org.pageOptions.orgID,xe=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={loading:!0,errorMsg:""},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;O.a.orgAdminGetGroup(fe,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)(Oe,{groupID:this.props.groupID,currentItem:"info"}),Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsx)(ve,{data:this.state})})]})})]})}}]),n}(c.Component),ve=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.data,t=e.loading,n=e.errorMsg,s=e.group_name,a=e.creator_email,r=e.creator_name;return t?Object(b.jsx)(Q.a,{}):n?Object(b.jsx)("p",{className:"error text-center mt-2",children:n}):Object(b.jsxs)("dl",{children:[Object(b.jsx)("dt",{children:Object(j.nb)("Name")}),Object(b.jsx)("dd",{children:s}),Object(b.jsx)("dt",{children:Object(j.nb)("Creator")}),Object(b.jsx)("dd",{children:Object(b.jsx)(h.a,{to:"".concat(j.mc,"org/useradmin/info/").concat(encodeURIComponent(a),"/"),children:r})})]})}}]),n}(c.Component),we=xe,De=window.org.pageOptions.orgID,Se=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={loading:!0,errorMsg:""},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;O.a.orgAdminListGroupRepos(De,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)(Oe,{groupID:this.props.groupID,currentItem:"repos"}),Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsx)(Ne,{data:this.state})})]})})]})}}]),n}(c.Component),Ne=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.data,t=e.loading,n=e.errorMsg,s=e.libraries;return t?Object(b.jsx)(Q.a,{}):n?Object(b.jsx)("p",{className:"error text-center mt-2",children:n}):Object(b.jsx)(c.Fragment,{children:Object(b.jsxs)("table",{className:"table-hover",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"4%"}),Object(b.jsx)("th",{width:"35%",children:Object(j.nb)("Name")}),Object(b.jsx)("th",{width:"20%",children:Object(j.nb)("Size")}),Object(b.jsx)("th",{width:"26%",children:Object(j.nb)("Shared By")}),Object(b.jsx)("th",{width:"15%"})]})}),Object(b.jsx)("tbody",{children:s.map((function(e,t){return Object(b.jsx)(Ie,{data:e},t)}))})]})})}}]),n}(c.Component),Ie=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleMouseOver=function(){a.setState({isOpIconShown:!0})},a.handleMouseOut=function(){a.setState({isOpIconShown:!1})},a.handleDeleteIconClick=function(e){e.preventDefault(),a.toggleDeleteRepoDialog()},a.toggleDeleteRepoDialog=function(){a.setState({isDeleteRepoDialogOpen:!a.state.isDeleteRepoDialogOpen})},a.deleteRepo=function(){var e=a.props.data;O.a.orgAdminDeleteOrgRepo(De,e.repo_id).then((function(t){a.setState({deleted:!0,isRepoDeleted:!0});var n=Object(j.nb)("Successfully deleted {name}.").replace("{name}",e.name);x.a.success(n)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t),a.setState({isRepoDeleted:!1})}))},a.state={isOpIconShown:!1,deleted:!1,isDeleteRepoDialogOpen:!1,isRepoDeleted:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.state,t=e.deleted,n=e.isOpIconShown,s=e.isDeleteRepoDialogOpen,a=this.props.data;return t?null:Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[Object(b.jsx)("td",{children:Object(b.jsx)("img",{src:f.a.getLibIconUrl(a,!1),alt:f.a.getLibIconTitle(a),title:f.a.getLibIconTitle(a),width:"24"})}),Object(b.jsx)("td",{children:a.name}),Object(b.jsx)("td",{children:f.a.bytesToSize(a.size)}),Object(b.jsx)("td",{children:Object(b.jsx)(h.a,{to:"".concat(j.mc,"org/useradmin/info/").concat(encodeURIComponent(a.shared_by),"/"),children:a.shared_by_name})}),Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:"#",className:"action-icon sf2-icon-delete".concat(n?"":" invisible"),title:Object(j.nb)("Delete"),onClick:this.handleDeleteIconClick})})]}),s&&Object(b.jsx)(Z.a,{repo:a,isRepoDeleted:this.state.isRepoDeleted,onDeleteRepo:this.deleteRepo,toggle:this.toggleDeleteRepoDialog})]})}}]),n}(c.Component),Ce=Se,Me=window.org.pageOptions.orgID,ye=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={loading:!0,errorMsg:""},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;O.a.orgAdminListGroupMembers(Me,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)(Oe,{groupID:this.props.groupID,currentItem:"members"}),Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsx)(ke,{data:this.state})})]})})]})}}]),n}(c.Component),ke=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.data,t=e.loading,n=e.errorMsg,s=e.members;return t?Object(b.jsx)(Q.a,{}):n?Object(b.jsx)("p",{className:"error text-center mt-2",children:n}):Object(b.jsx)(c.Fragment,{children:Object(b.jsxs)("table",{className:"table-hover",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"10%"}),Object(b.jsx)("th",{width:"50%",children:Object(j.nb)("Name")}),Object(b.jsx)("th",{width:"40%",children:Object(j.nb)("Role")})]})}),Object(b.jsx)("tbody",{children:s.map((function(e,t){return Object(b.jsx)(_e,{data:e},t)}))})]})})}}]),n}(c.Component),_e=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"getRoleText",value:function(){switch(this.props.data.role){case"Owner":return Object(j.nb)("Owner");case"Admin":return Object(j.nb)("Admin");case"Member":return Object(j.nb)("Member")}}},{key:"render",value:function(){var e=this.props.data;return Object(b.jsx)(c.Fragment,{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"text-center",children:Object(b.jsx)("img",{src:e.avatar_url,alt:"",className:"avatar",width:"32"})}),Object(b.jsx)("td",{children:Object(b.jsx)(h.a,{to:"".concat(j.mc,"org/useradmin/info/").concat(encodeURIComponent(e.email),"/"),children:e.name})}),Object(b.jsx)("td",{children:this.getRoleText()})]})})}}]),n}(c.Component),Ae=ye,Ue=function e(t){Object(s.a)(this,e),this.repoID=t.repo_id,this.repoName=t.repo_name,this.ownerName=t.owner_name,this.ownerEmail=t.owner_email,this.size=t.size,this.file_count=t.file_count,this.encrypted=t.encrypted,this.isDepartmentRepo=t.is_department_repo,this.groupID=t.group_id},Re=n(188),ze=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).listRepos=function(e){O.a.orgAdminListOrgRepos(j.Qb,e,a.state.sortBy).then((function(e){var t=e.data.repo_list.map((function(e){return new Ue(e)}));a.setState({orgRepos:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.onChangePageNum=function(e,t){e.preventDefault();var n=a.state.page;1==t?n+=1:n-=1,a.listRepos(n)},a.onFreezedItem=function(){a.setState({isItemFreezed:!0})},a.onUnfreezedItem=function(){a.setState({isItemFreezed:!1})},a.deleteRepoItem=function(e){O.a.orgAdminDeleteOrgRepo(j.Qb,e.repoID).then((function(t){a.setState({orgRepos:a.state.orgRepos.filter((function(t){return t.repoID!=e.repoID}))});var n=Object(j.nb)("Successfully deleted {name}");n=n.replace("{name}",e.repoName),x.a.success(n)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.transferRepoItem=function(e,t){a.setState({orgRepos:a.state.orgRepos.map((function(n){return n.repoID==e&&(n.ownerEmail=t.email,n.ownerName=t.value),n}))})},a.sortItems=function(e){a.setState({page:1,sortBy:e},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),n=a.state,s=n.page,r=n.sortBy;t.set("page",s),t.set("order_by",r),e.search=t.toString(),Object(h.c)(e.toString()),a.listRepos(s)}))},a.sortByFileCount=function(e){e.preventDefault(),a.sortItems("file_count")},a.sortBySize=function(e){e.preventDefault(),a.sortItems("size")},a.state={page:1,pageNext:!1,orgRepos:[],sortBy:"",isItemFreezed:!1},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,s=n.page,a=n.sortBy;this.setState({sortBy:t.get("order_by")||a,page:parseInt(t.get("page")||s)},(function(){e.listRepos(e.state.page)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.orgRepos,s=t.sortBy,a=Object(b.jsx)("span",{className:"fas fa-sort"}),r=Object(b.jsx)("span",{className:"fas fa-caret-down"});return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.nb)("All Libraries")})}),Object(b.jsxs)("div",{className:"cur-view-content",children:[Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"5%"}),Object(b.jsx)("th",{width:"25%",children:Object(j.nb)("Name")}),Object(b.jsxs)("th",{width:"15%",children:[Object(b.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByFileCount,children:[Object(j.nb)("Files")," ","file_count"==s?r:a]})," / ",Object(b.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortBySize,children:[Object(j.nb)("Size")," ","size"==s?r:a]})]}),Object(b.jsx)("th",{width:"32%",children:"ID"}),Object(b.jsx)("th",{width:"18%",children:Object(j.nb)("Owner")}),Object(b.jsx)("th",{width:"5%"})]})}),Object(b.jsx)("tbody",{children:n.map((function(t){return Object(b.jsx)(Le,{repo:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteRepoItem:e.deleteRepoItem,transferRepoItem:e.transferRepoItem},t.repoID)}))})]}),Object(b.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(j.nb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(b.jsx)("span",{children:" | "}),this.state.pageNext&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(j.nb)("Next")})]})]})]})})]})}}]),n}(c.Component),Le=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onMouseEnter=function(){a.props.isItemFreezed||a.setState({showMenu:!0,highlight:!0})},a.onMouseLeave=function(){a.props.isItemFreezed||a.setState({showMenu:!1,highlight:!1})},a.onDropdownToggleClick=function(e){e.preventDefault(),a.toggleOperationMenu(e)},a.toggleOperationMenu=function(e){e.stopPropagation(),a.setState({isItemMenuShow:!a.state.isItemMenuShow},(function(){a.state.isItemMenuShow?a.props.onFreezedItem():(a.setState({highlight:!1,showMenu:!1}),a.props.onUnfreezedItem())}))},a.toggleDelete=function(){a.props.deleteRepoItem(a.props.repo)},a.toggleTransfer=function(){a.props.transferRepoItem(a.props.repo)},a.renderLibIcon=function(e){var t,n;return e.encrypted?(t=j.Lb+"img/lib/48/lib-encrypted.png",n=Object(j.nb)("Encrypted library")):(t=j.Lb+"img/lib/48/lib.png",n=Object(j.nb)("Read-Write library")),Object(b.jsx)("img",{src:t,title:n,alt:n,width:"24"})},a.renderRepoOwnerHref=function(e){return e.isDepartmentRepo?j.mc+"org/admin/#address-book/groups/"+e.groupID+"/":j.mc+"org/useradmin/info/"+e.ownerEmail+"/"},a.toggleTransfer=function(){a.setState({isTransferDialogShow:!a.state.isTransferDialogShow})},a.onTransferRepo=function(e){var t=a.props.repo;O.a.orgAdminTransferOrgRepo(j.Qb,t.repoID,e.email).then((function(n){a.props.transferRepoItem(t.repoID,e);var s=Object(j.nb)("Successfully transferred the library.");x.a.success(s)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)})),a.toggleTransfer()},a.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,isTransferDialogShow:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.repo,t=this.state.showMenu&&!e.isDepartmentRepo;return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:this.renderLibIcon(e)}),Object(b.jsx)("td",{children:e.repoName}),Object(b.jsx)("td",{children:"".concat(e.file_count," / ").concat(f.a.bytesToSize(e.size))}),Object(b.jsx)("td",{children:e.repoID}),Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:this.renderRepoOwnerHref(e),children:e.ownerName})}),Object(b.jsx)("td",{className:"text-center cursor-pointer",children:t&&Object(b.jsxs)(m.l,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(b.jsx)(m.o,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(j.nb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),Object(b.jsxs)(m.n,{children:[Object(b.jsx)(m.m,{onClick:this.toggleDelete,children:Object(j.nb)("Delete")}),Object(b.jsx)(m.m,{onClick:this.toggleTransfer,children:Object(j.nb)("Transfer")})]})]})})]}),this.state.isTransferDialogShow&&Object(b.jsx)(C.a,{children:Object(b.jsx)(Re.a,{itemName:e.repoName,submit:this.onTransferRepo,toggleDialog:this.toggleTransfer})})]})}}]),n}(o.a.Component),Fe=ze,Ee=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={storage_quota:0,storage_usage:0,member_quota:0,member_usage:0,active_members:0},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;O.a.orgAdminGetOrgInfo().then((function(t){e.setState({storage_quota:t.data.storage_quota,storage_usage:t.data.storage_usage,member_quota:t.data.member_quota,member_usage:t.data.member_usage,active_members:t.data.active_members})}))}},{key:"render",value:function(){return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.nb)("Info")})}),Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsxs)("dl",{children:[Object(b.jsx)("dt",{children:Object(j.nb)("Space Used")}),this.state.storage_quota>0?Object(b.jsxs)("dd",{children:[f.a.bytesToSize(this.state.storage_usage)," / ",f.a.bytesToSize(this.state.storage_quota)]}):Object(b.jsx)("dd",{children:f.a.bytesToSize(this.state.storage_usage)}),j.Rb?Object(b.jsxs)("dt",{children:[Object(j.nb)("Active Users")," / ",Object(j.nb)("Total Users")," / ",Object(j.nb)("Limits")]}):Object(b.jsxs)("dt",{children:[Object(j.nb)("Active Users")," / ",Object(j.nb)("Total Users")]}),j.Rb?Object(b.jsxs)("dd",{children:[this.state.active_members>0?this.state.active_members:"--"," / ",this.state.member_usage>0?this.state.member_usage:"--"," / ",this.state.member_quota>0?this.state.member_quota:"--"]}):Object(b.jsxs)("dd",{children:[this.state.active_members>0?this.state.active_members:"--"," / ",this.state.member_usage>0?this.state.member_usage:"--"]})]})})]})})]})}}]),n}(c.Component),Pe=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).copyToClipBoard=function(){Object(y.a)(a.props.currentLinkHref);var e=Object(j.nb)("Link has been copied to clipboard");x.a.success(e),a.props.toggle()},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.currentLinkHref;return Object(b.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.A,{toggle:this.props.toggle,children:Object(j.nb)("Link")}),Object(b.jsx)(m.y,{children:Object(b.jsx)("p",{children:Object(b.jsx)("a",{target:"_blank",href:e,children:e})})}),Object(b.jsxs)(m.z,{children:[Object(b.jsx)(m.c,{color:"secondary",onClick:this.props.toggle,children:Object(j.nb)("Cancel")})," ",Object(b.jsx)(m.c,{color:"primary",onClick:this.copyToClipBoard,children:Object(j.nb)("Copy")})]})]})}}]),n}(o.a.Component),Ge=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).listOrgLinks=function(e){O.a.orgAdminListOrgLinks(a.state.page).then((function(e){var t=e.data;a.setState({linkList:t.link_list,page:t.page,pageNext:t.page_next})}))},a.onFreezedItem=function(){a.setState({isItemFreezed:!0})},a.onUnfreezedItem=function(){a.setState({isItemFreezed:!1})},a.onChangePageNum=function(e,t){e.preventDefault();var n=a.state.page;1==t?n+=1:n-=1,a.listOrgLinks(n)},a.deleteOrgLink=function(e){O.a.orgAdminDeleteOrgLink(e).then((function(e){!0===e.data.success&&a.listOrgLinks(a.state.page)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.openLinkDialog=function(e){var t;t=e.name.indexOf("/")>-1?j.bc+"/d/"+e.token+"/":j.bc+"/f/"+e.token+"/",a.setState({currentLinkHref:t}),a.toggleLinkDialog()},a.toggleLinkDialog=function(){a.setState({isShowLinkDialog:!a.state.isShowLinkDialog})},a.state={linkList:null,page:1,pageNext:!1,isItemFreezed:!1,isShowLinkDialog:!1,currentLinkHref:""},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.listOrgLinks(this.state.page)}},{key:"render",value:function(){var e=this,t=this.state.linkList;return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.nb)("All Public Links")})}),Object(b.jsxs)("div",{className:"cur-view-content",children:[Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"50%",children:Object(j.nb)("Name")}),Object(b.jsx)("th",{width:"15%",children:Object(j.nb)("Owner")}),Object(b.jsx)("th",{width:"15%",children:Object(j.nb)("Created At")}),Object(b.jsx)("th",{width:"10%",children:Object(j.nb)("Count")}),Object(b.jsx)("th",{width:"10%"})]})}),Object(b.jsx)("tbody",{children:t&&t.map((function(t,n){return Object(b.jsx)(o.a.Fragment,{children:Object(b.jsx)(Te,{link:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteOrgLink:e.deleteOrgLink,openLinkDialog:e.openLinkDialog})},n)}))})]}),Object(b.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(j.nb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(b.jsx)("span",{children:" | "}),this.state.pageNext&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(j.nb)("Next")})]})]})]})}),this.state.isShowLinkDialog&&Object(b.jsx)(Pe,{currentLinkHref:this.state.currentLinkHref,toggle:this.toggleLinkDialog})]})}}]),n}(o.a.Component),Te=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onMouseEnter=function(){a.props.isItemFreezed||a.setState({showMenu:!0,highlight:!0})},a.onMouseLeave=function(){a.props.isItemFreezed||a.setState({showMenu:!1,highlight:!1})},a.onDropdownToggleClick=function(e){e.preventDefault(),a.toggleOperationMenu(e)},a.toggleOperationMenu=function(e){e.stopPropagation(),a.setState({isItemMenuShow:!a.state.isItemMenuShow},(function(){a.state.isItemMenuShow?a.props.onFreezedItem():(a.setState({highlight:!1,showMenu:!1}),a.props.onUnfreezedItem())}))},a.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.link,n=e.deleteOrgLink,s=j.mc+"org/useradmin/info/"+encodeURIComponent(t.owner_email)+"/";return Object(b.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:t.name}),Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:s,children:t.owner_name})}),Object(b.jsx)("td",{children:A()(t.created_time).fromNow()}),Object(b.jsx)("td",{children:t.view_count}),Object(b.jsx)("td",{className:"cursor-pointer text-center",children:this.state.showMenu&&Object(b.jsxs)(m.l,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(b.jsx)(m.o,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(j.nb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),Object(b.jsxs)(m.n,{children:[Object(b.jsx)(m.m,{onClick:n.bind(this,t.token),children:Object(j.nb)("Delete")}),Object(b.jsx)(m.m,{onClick:this.props.openLinkDialog.bind(this,t),children:Object(j.nb)("View Link")})]})]})})]})}}]),n}(o.a.Component),Qe=Ge,qe=(n(209),function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{className:"h-100 org-departments",children:this.props.children})}}]),n}(o.a.Component)),Be=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleSubmit=function(){if(a.validateName()){var e=-1;a.props.parentGroupID&&(e=a.props.parentGroupID),O.a.orgAdminAddDepartGroup(j.Qb,e,a.state.departName.trim()).then((function(e){a.props.toggle(),a.props.onDepartChanged()})).catch((function(e){var t=Object(j.nb)(e.response.data.error_msg);a.setState({errMessage:t})}))}},a.validateName=function(){var e="";return!!a.state.departName.trim().length||(e=Object(j.nb)("Name is required"),a.setState({errMessage:e}),!1)},a.handleChange=function(e){a.setState({departName:e.target.value})},a.handleKeyPress=function(e){"Enter"===e.key&&(a.handleSubmit(),e.preventDefault())},a.state={departName:"",errMessage:""},a.newInput=o.a.createRef(),a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this,t=this.props.parentGroupID?Object(j.nb)("New Sub-department"):Object(j.nb)("New Department");return Object(b.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.A,{toggle:this.props.toggle,children:t}),Object(b.jsxs)(m.y,{children:[Object(b.jsx)(m.p,{children:Object(b.jsxs)(m.q,{children:[Object(b.jsx)(m.w,{for:"departName",children:Object(j.nb)("Name")}),Object(b.jsx)(m.s,{id:"departName",onKeyPress:this.handleKeyPress,value:this.state.departName,onChange:this.handleChange,innerRef:function(t){e.newInput=t}})]})}),this.state.errMessage&&Object(b.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(b.jsx)(m.z,{children:Object(b.jsx)(m.c,{color:"primary",onClick:this.handleSubmit,children:Object(j.nb)("Submit")})})]})}}]),n}(o.a.Component),He=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).deleteDepart=function(){a.props.toggle(),O.a.orgAdminDeleteDepartGroup(j.Qb,a.props.groupID).then((function(e){a.props.onDepartChanged()})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a}return Object(a.a)(n,[{key:"render",value:function(){var e=Object(j.nb)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+f.a.HTMLescape(this.props.groupName)+"</span>"),Object(b.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.A,{toggle:this.props.toggle,children:Object(j.nb)("Delete Department")}),Object(b.jsx)(m.y,{children:Object(b.jsx)("p",{dangerouslySetInnerHTML:{__html:e}})}),Object(b.jsxs)(m.z,{children:[Object(b.jsx)(m.c,{color:"secondary",onClick:this.props.toggle,children:Object(j.nb)("Cancel")}),Object(b.jsx)(m.c,{color:"primary",onClick:this.deleteDepart,children:Object(j.nb)("Delete")})]})]})}}]),n}(o.a.Component),Ye=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).setGroupQuota=function(){var e=a.state.quota;if(e.length&&/^[1-9]\d*$/im.test(e)||-2==e){a.setState({errMessage:""});var t=-2==a.state.quota?a.state.quota:1e6*a.state.quota;O.a.orgAdminSetGroupQuota(j.Qb,a.props.groupID,t).then((function(e){a.props.toggle(),a.props.onDepartChanged()})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))}else{var n=Object(j.nb)("Quota is invalid.");a.setState({errMessage:n})}},a.handleChange=function(e){var t=e.target.value.trim();a.setState({quota:t})},a.handleKeyPress=function(e){"Enter"===e.key&&(a.setGroupQuota(),e.preventDefault())},a.state={quota:"",errMessage:""},a.newInput=o.a.createRef(),a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.A,{toggle:this.props.toggle,children:Object(j.nb)("Set Quota")}),Object(b.jsxs)(m.y,{children:[Object(b.jsxs)(m.t,{children:[Object(b.jsx)(m.s,{onKeyPress:this.handleKeyPress,value:this.state.quota,onChange:this.handleChange,innerRef:function(t){e.newInput=t}}),Object(b.jsx)(m.u,{addonType:"append",children:"MB"})]}),Object(b.jsxs)("p",{className:"tip",children:[Object(b.jsx)("br",{}),Object(b.jsx)("span",{children:Object(j.nb)("An integer that is greater than 0 or equal to -2.")}),Object(b.jsx)("br",{}),Object(b.jsx)("span",{children:Object(j.nb)("Tip: -2 means no limit.")})]}),this.state.errMessage&&Object(b.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(b.jsx)(m.z,{children:Object(b.jsx)(m.c,{color:"primary",onClick:this.setGroupQuota,children:Object(j.nb)("Submit")})})]})}}]),n}(o.a.Component);A.a.locale(j.Bb);var Ve=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).listDepartGroups=function(){O.a.orgAdminListDepartGroups(j.Qb).then((function(e){a.setState({groups:e.data.data})}))},a.showDeleteDepartDialog=function(e){a.setState({showDeleteDepartDialog:!0,groupID:e.id,groupName:e.name})},a.showSetGroupQuotaDialog=function(e){a.setState({showSetGroupQuotaDialog:!0,groupID:e})},a.toggleAddDepartDialog=function(){a.setState({isShowAddDepartDialog:!a.state.isShowAddDepartDialog})},a.toggleCancel=function(){a.setState({showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1})},a.onDepartChanged=function(){a.listDepartGroups()},a.state={groups:null,groupID:"",groupName:"",showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1,isShowAddDepartDialog:!1},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.listDepartGroups()}},{key:"render",value:function(){var e=this,t=this.state.groups,n=Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)("button",{className:"btn btn-secondary operation-item",title:Object(j.nb)("New Department"),onClick:this.toggleAddDepartDialog,children:Object(j.nb)("New Department")}),this.state.isShowAddDepartDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(Be,{onDepartChanged:this.onDepartChanged,groupID:this.state.groupID,toggle:this.toggleAddDepartDialog})})]});return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{children:n}),Object(b.jsx)("div",{className:"main-panel-center flex-row h-100",children:Object(b.jsxs)("div",{className:"cur-view-container o-auto",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("div",{className:"fleft",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.nb)("Departments")})})}),Object(b.jsx)("div",{className:"cur-view-content",children:t&&t.length>0?Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"40%",children:Object(j.nb)("Name")}),Object(b.jsx)("th",{width:"25%",children:Object(j.nb)("Created At")}),Object(b.jsx)("th",{width:"20%",children:Object(j.nb)("Quota")}),Object(b.jsx)("th",{width:"15%"})]})}),Object(b.jsx)("tbody",{children:t.map((function(t,n){return Object(b.jsx)(o.a.Fragment,{children:Object(b.jsx)(Ke,{group:t,showDeleteDepartDialog:e.showDeleteDepartDialog,showSetGroupQuotaDialog:e.showSetGroupQuotaDialog})},t.id)}))})]}):Object(b.jsx)("p",{className:"no-group",children:Object(j.nb)("No departments")})}),Object(b.jsxs)(o.a.Fragment,{children:[this.state.showDeleteDepartDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(He,{toggle:this.toggleCancel,groupID:this.state.groupID,groupName:this.state.groupName,onDepartChanged:this.onDepartChanged})}),this.state.showSetGroupQuotaDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(Ye,{toggle:this.toggleCancel,groupID:this.state.groupID,onDepartChanged:this.onDepartChanged})})]})]})})]})}}]),n}(o.a.Component),Ke=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onMouseEnter=function(){a.setState({highlight:!0})},a.onMouseLeave=function(){a.setState({highlight:!1})},a.state={highlight:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.group,t=this.state.highlight,n=j.mc+"org/departmentadmin/groups/"+e.id+"/";return Object(b.jsxs)("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:Object(b.jsx)(h.a,{to:n,children:e.name})}),Object(b.jsx)("td",{children:A()(e.created_at).fromNow()}),Object(b.jsxs)("td",{onClick:this.props.showSetGroupQuotaDialog.bind(this,e.id),children:[f.a.bytesToSize(e.quota)," ",Object(b.jsx)("span",{title:"Edit Quota",className:"fa fa-pencil-alt attr-action-icon ".concat(t?"":"vh")})]}),Object(b.jsx)("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteDepartDialog.bind(this,e),children:Object(b.jsx)("span",{className:"sf2-icon-delete action-icon  ".concat(t?"":"vh"),title:"Delete"})})]})}}]),n}(o.a.Component),We=Ve,Je=n(250),$e=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleSelectChange=function(e){a.setState({selectedOption:e}),a.Options=[]},a.handleSubmit=function(){if(a.state.selectedOption){var e=a.state.selectedOption.email;a.refs.orgSelect.clearSelect(),a.setState({errMessage:[]}),O.a.orgAdminAddGroupMember(j.Qb,a.props.groupID,e).then((function(e){a.setState({selectedOption:null}),e.data.failed.length>0&&a.setState({errMessage:e.data.failed[0].error_msg}),e.data.success.length>0&&(a.props.onMemberChanged(),a.props.toggle())})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))}},a.state={selectedOption:null,errMessage:""},a.Options=[],a}return Object(a.a)(n,[{key:"render",value:function(){return Object(b.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.A,{toggle:this.props.toggle,children:Object(j.nb)("Add Member")}),Object(b.jsxs)(m.y,{children:[Object(b.jsx)(P.a,{placeholder:Object(j.nb)("Search users..."),onSelectChange:this.handleSelectChange,ref:"orgSelect",isMulti:!1,className:"org-add-member-select"}),this.state.errMessage&&Object(b.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(b.jsxs)(m.z,{children:[Object(b.jsx)(m.c,{color:"primary",onClick:this.handleSubmit,children:Object(j.nb)("Submit")}),Object(b.jsx)(m.c,{color:"secondary",onClick:this.props.toggle,children:Object(j.nb)("Cancel")})]})]})}}]),n}(o.a.Component),Xe=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).deleteMember=function(){var e=a.props.member.email;O.a.orgAdminDeleteGroupMember(j.Qb,a.props.groupID,e).then((function(e){e.data.success&&(a.props.onMemberChanged(),a.props.toggle())})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a}return Object(a.a)(n,[{key:"render",value:function(){var e=Object(j.nb)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+f.a.HTMLescape(this.props.member.name)+"</span>"),Object(b.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.A,{toggle:this.props.toggle,children:Object(j.nb)("Delete Member")}),Object(b.jsx)(m.y,{children:Object(b.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})}),Object(b.jsxs)(m.z,{children:[Object(b.jsx)(m.c,{color:"primary",onClick:this.deleteMember,children:Object(j.nb)("Delete")}),Object(b.jsx)(m.c,{color:"secondary",onClick:this.props.toggle,children:Object(j.nb)("Cancel")})]})]})}}]),n}(o.a.Component),Ze=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleSubmit=function(){a.validateName()&&O.a.orgAdminAddDepartmentRepo(j.Qb,a.props.groupID,a.state.repoName.trim()).then((function(e){a.props.toggle(),a.props.onRepoChanged()})).catch((function(e){var t=f.a.getErrorMsg(e);a.setState({errMessage:t})}))},a.validateName=function(){var e="";return!!a.state.repoName.trim().length||(e=Object(j.nb)("Name is required"),a.setState({errMessage:e}),!1)},a.handleChange=function(e){a.setState({repoName:e.target.value})},a.handleKeyPress=function(e){"Enter"===e.key&&(a.handleSubmit(),e.preventDefault())},a.state={repoName:"",errMessage:""},a.newInput=o.a.createRef(),a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.A,{toggle:this.props.toggle,children:Object(j.nb)("New Library")}),Object(b.jsxs)(m.y,{children:[Object(b.jsx)(m.p,{children:Object(b.jsxs)(m.q,{children:[Object(b.jsx)(m.w,{for:"repoName",children:Object(j.nb)("Name")}),Object(b.jsx)(m.s,{id:"repoName",onKeyPress:this.handleKeyPress,value:this.state.repoName,onChange:this.handleChange,innerRef:function(t){e.newInput=t}})]})}),this.state.errMessage&&Object(b.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(b.jsx)(m.z,{children:Object(b.jsx)(m.c,{color:"primary",onClick:this.handleSubmit,children:Object(j.nb)("Submit")})})]})}}]),n}(o.a.Component),et=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).deleteRepo=function(){O.a.orgAdminDeleteDepartmentRepo(j.Qb,a.props.groupID,a.props.repo.repo_id).then((function(e){e.data.success&&(a.props.onRepoChanged(),a.props.toggle())})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a}return Object(a.a)(n,[{key:"render",value:function(){var e=Object(j.nb)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+f.a.HTMLescape(this.props.repo.name)+"</span>"),Object(b.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.A,{toggle:this.props.toggle,children:Object(j.nb)("Delete Library")}),Object(b.jsx)(m.y,{children:Object(b.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})}),Object(b.jsxs)(m.z,{children:[Object(b.jsx)(m.c,{color:"primary",onClick:this.deleteRepo,children:Object(j.nb)("Delete")}),Object(b.jsx)(m.c,{color:"secondary",onClick:this.props.toggle,children:Object(j.nb)("Cancel")})]})]})}}]),n}(o.a.Component);A.a.locale(j.Bb);var tt=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).listOrgGroupRepo=function(e){O.a.orgAdminListGroupRepos(j.Qb,e).then((function(e){a.setState({repos:e.data.libraries})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.listOrgMembers=function(e){O.a.orgAdminListGroupInfo(j.Qb,e,!0).then((function(e){a.setState({members:e.data.members,groups:e.data.groups,ancestorGroups:e.data.ancestor_groups,groupName:e.data.name})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.listSubDepartGroups=function(e){O.a.orgAdminListGroupInfo(j.Qb,e,!0).then((function(e){a.setState({groups:e.data.groups})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.toggleCancel=function(){a.setState({showDeleteMemberDialog:!1,showDeleteRepoDialog:!1,showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1})},a.onSubDepartChanged=function(){a.listSubDepartGroups(a.props.groupID)},a.onRepoChanged=function(){a.listOrgGroupRepo(a.props.groupID)},a.onMemberChanged=function(){a.listOrgMembers(a.props.groupID)},a.toggleItemFreezed=function(e){a.setState({isItemFreezed:e})},a.showDeleteMemberDialog=function(e){a.setState({showDeleteMemberDialog:!0,deletedMember:e})},a.showDeleteRepoDialog=function(e){a.setState({showDeleteRepoDialog:!0,deletedRepo:e})},a.toggleAddRepoDialog=function(){a.setState({isShowAddRepoDialog:!a.state.isShowAddRepoDialog})},a.toggleAddMemberDialog=function(){a.setState({isShowAddMemberDialog:!a.state.isShowAddMemberDialog})},a.toggleAddDepartDialog=function(){a.setState({isShowAddDepartDialog:!a.state.isShowAddDepartDialog})},a.showDeleteDepartDialog=function(e){a.setState({showDeleteDepartDialog:!0,subGroupID:e.id,subGroupName:e.name})},a.showSetGroupQuotaDialog=function(e){a.setState({showSetGroupQuotaDialog:!0,subGroupID:e})},a.state={groupName:"",isItemFreezed:!1,ancestorGroups:[],members:[],deletedMember:{},isShowAddMemberDialog:!1,showDeleteMemberDialog:!1,repos:[],deletedRepo:{},isShowAddRepoDialog:!1,showDeleteRepoDialog:!1,groups:[],subGroupID:"",subGroupName:"",isShowAddDepartDialog:!1,showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.groupID;this.listOrgGroupRepo(e),this.listOrgMembers(e)}},{key:"componentWillReceiveProps",value:function(e){this.props.groupID!==e.groupID&&(this.listOrgGroupRepo(e.groupID),this.listOrgMembers(e.groupID))}},{key:"render",value:function(){var e=this,t=this.state,n=t.members,s=t.repos,a=t.groups,r=this.props.groupID,i="btn btn-secondary operation-item",l=Object(b.jsxs)(c.Fragment,{children:[r&&Object(b.jsx)("button",{className:i,title:Object(j.nb)("New Sub-department"),onClick:this.toggleAddDepartDialog,children:Object(j.nb)("New Sub-department")}),r&&Object(b.jsx)("button",{className:i,title:Object(j.nb)("Add Member"),onClick:this.toggleAddMemberDialog,children:Object(j.nb)("Add Member")}),r&&Object(b.jsx)("button",{className:i,onClick:this.toggleAddRepoDialog,title:Object(j.nb)("New Library"),children:Object(j.nb)("New Library")}),this.state.isShowAddMemberDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)($e,{toggle:this.toggleAddMemberDialog,onMemberChanged:this.onMemberChanged,groupID:r})}),this.state.isShowAddRepoDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(Ze,{toggle:this.toggleAddRepoDialog,onRepoChanged:this.onRepoChanged,groupID:r})}),this.state.isShowAddDepartDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(Be,{onDepartChanged:this.onSubDepartChanged,parentGroupID:r,toggle:this.toggleAddDepartDialog})})]});return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{children:l}),Object(b.jsxs)("div",{className:"main-panel-center flex-row h-100",children:[Object(b.jsxs)("div",{className:"cur-view-container o-auto",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("div",{className:"fleft",children:Object(b.jsxs)("h3",{className:"sf-heading",children:[r?Object(b.jsx)(h.a,{to:j.mc+"org/departmentadmin/",children:Object(j.nb)("Departments")}):Object(b.jsx)("span",{children:Object(j.nb)("Departments")}),this.state.ancestorGroups.map((function(e){var t=j.mc+"org/departmentadmin/groups/"+e.id+"/";return Object(b.jsxs)("span",{children:[" / ",Object(b.jsx)(h.a,{to:t,children:e.name})]},e.id)})),r&&Object(b.jsxs)("span",{children:[" / ",this.state.groupName]})]})})}),Object(b.jsxs)("div",{className:"cur-view-subcontainer org-groups",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("div",{className:"fleft",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.nb)("Sub-departments")})})}),Object(b.jsx)("div",{className:"cur-view-content",children:a&&a.length>0?Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"40%",children:Object(j.nb)("Name")}),Object(b.jsx)("th",{width:"25%",children:Object(j.nb)("Created At")}),Object(b.jsx)("th",{width:"20%",children:Object(j.nb)("Quota")}),Object(b.jsx)("th",{width:"15%"})]})}),Object(b.jsx)("tbody",{children:a.map((function(t,n){return Object(b.jsx)(o.a.Fragment,{children:Object(b.jsx)(at,{group:t,showDeleteDepartDialog:e.showDeleteDepartDialog,showSetGroupQuotaDialog:e.showSetGroupQuotaDialog})},t.id)}))})]}):Object(b.jsx)("p",{className:"no-group",children:Object(j.nb)("No sub-departments")})})]}),Object(b.jsxs)("div",{className:"cur-view-subcontainer org-members",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("div",{className:"fleft",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.nb)("Members")})})}),Object(b.jsx)("div",{className:"cur-view-content",children:n&&0!==n.length?Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"5%"}),Object(b.jsx)("th",{width:"50%",children:Object(j.nb)("Name")}),Object(b.jsx)("th",{width:"15%",children:Object(j.nb)("Role")}),Object(b.jsx)("th",{width:"30%"})]})}),Object(b.jsx)("tbody",{children:n.map((function(t,n){return Object(b.jsx)(o.a.Fragment,{children:Object(b.jsx)(nt,{member:t,showDeleteMemberDialog:e.showDeleteMemberDialog,isItemFreezed:e.state.isItemFreezed,onMemberChanged:e.onMemberChanged,toggleItemFreezed:e.toggleItemFreezed,groupID:r})},n)}))})]}):Object(b.jsx)("p",{className:"no-member",children:Object(j.nb)("No members")})})]}),Object(b.jsxs)("div",{className:"cur-view-subcontainer org-libriries",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("div",{className:"fleft",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.nb)("Libraries")})})}),s.length>0?Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"5%"}),Object(b.jsx)("th",{width:"50%",children:Object(j.nb)("Name")}),Object(b.jsx)("th",{width:"30%",children:Object(j.nb)("Size")}),Object(b.jsx)("th",{width:"15%"})]})}),Object(b.jsx)("tbody",{children:s.map((function(t,n){return Object(b.jsx)(o.a.Fragment,{children:Object(b.jsx)(st,{repo:t,showDeleteRepoDialog:e.showDeleteRepoDialog})},n)}))})]})}):Object(b.jsx)("p",{className:"no-libraty",children:Object(j.nb)("No libraries")})]})]}),Object(b.jsxs)(o.a.Fragment,{children:[this.state.showDeleteMemberDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(Xe,{toggle:this.toggleCancel,onMemberChanged:this.onMemberChanged,member:this.state.deletedMember,groupID:r})}),this.state.showDeleteRepoDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(et,{toggle:this.toggleCancel,onRepoChanged:this.onRepoChanged,repo:this.state.deletedRepo,groupID:r})}),this.state.showDeleteDepartDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(He,{toggle:this.toggleCancel,groupID:this.state.subGroupID,groupName:this.state.subGroupName,onDepartChanged:this.onSubDepartChanged})}),this.state.showSetGroupQuotaDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(Ye,{toggle:this.toggleCancel,groupID:this.state.subGroupID,onDepartChanged:this.onSubDepartChanged})})]})]})]})}}]),n}(o.a.Component),nt=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onMouseEnter=function(){a.props.isItemFreezed||a.setState({highlight:!0})},a.onMouseLeave=function(){a.props.isItemFreezed||a.setState({highlight:!1})},a.toggleMemberRoleMenu=function(){a.setState({showRoleMenu:!a.state.showRoleMenu})},a.onChangeUserRole=function(e){var t="Admin"===e;O.a.orgAdminSetGroupMemberRole(j.Qb,a.props.groupID,a.props.member.email,t).then((function(e){a.props.onMemberChanged()})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)})),a.setState({highlight:!1})},a.state={highlight:!1,showRoleMenu:!1},a.roles=["Admin","Member"],a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.member,t=this.state.highlight,n=j.bc+"/org/useradmin/info/"+e.email+"/";return"Owner"===e.role?null:Object(b.jsxs)("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:Object(b.jsx)("img",{src:e.avatar_url,alt:"member-header",width:"24",className:"avatar"})}),Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:n,children:e.name})}),Object(b.jsx)("td",{children:Object(b.jsx)(Je.a,{isTextMode:!0,isEditIconShow:t,currentRole:e.role,roles:this.roles,onRoleChanged:this.onChangeUserRole,toggleItemFreezed:this.props.toggleItemFreezed})}),this.props.isItemFreezed?Object(b.jsx)("td",{}):Object(b.jsx)("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteMemberDialog.bind(this,e),children:Object(b.jsx)("span",{className:"sf2-icon-x3 action-icon ".concat(t?"":"vh"),title:"Delete"})})]})}}]),n}(o.a.Component),st=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onMouseEnter=function(){a.setState({highlight:!0})},a.onMouseLeave=function(){a.setState({highlight:!1})},a.state={highlight:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.repo,t=this.state.highlight,n=f.a.getLibIconUrl(e);return Object(b.jsxs)("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:Object(b.jsx)("img",{src:n,width:"24",alt:Object(j.nb)("icon")})}),Object(b.jsx)("td",{children:e.name}),Object(b.jsxs)("td",{children:[f.a.bytesToSize(e.size)," "]}),Object(b.jsx)("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteRepoDialog.bind(this,e),children:Object(b.jsx)("span",{className:"sf2-icon-delete action-icon ".concat(t?"":"vh"),title:"Delete"})})]})}}]),n}(o.a.Component),at=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onMouseEnter=function(){a.setState({highlight:!0})},a.onMouseLeave=function(){a.setState({highlight:!1})},a.state={highlight:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.group,t=this.state.highlight,n=j.mc+"org/departmentadmin/groups/"+e.id+"/";return Object(b.jsxs)("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:Object(b.jsx)(h.a,{to:n,children:e.name})}),Object(b.jsx)("td",{children:A()(e.created_at).fromNow()}),Object(b.jsxs)("td",{onClick:this.props.showSetGroupQuotaDialog.bind(this,e.id),children:[f.a.bytesToSize(e.quota)," ",Object(b.jsx)("span",{title:"Edit Quota",className:"fa fa-pencil-alt attr-action-icon ".concat(t?"":"vh")})]}),Object(b.jsx)("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteDepartDialog.bind(this,e),children:Object(b.jsx)("span",{className:"sf2-icon-delete action-icon ".concat(t?"":"vh"),title:"Delete"})})]})}}]),n}(o.a.Component),rt=tt,it=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).tabItemClick=function(e){a.props.tabItemClick(e)},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)("div",{className:"cur-view-path org-user-nav",children:Object(b.jsxs)("ul",{className:"nav",children:[Object(b.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("logadmin")},children:Object(b.jsx)(h.a,{className:"nav-link ".concat("logadmin"===this.props.currentTab?"active":""),to:j.mc+"org/logadmin/",title:Object(j.nb)("File Access"),children:Object(j.nb)("File Access")})}),Object(b.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("file-update")},children:Object(b.jsx)(h.a,{className:"nav-link ".concat("file-update"===this.props.currentTab?"active":""),to:j.mc+"org/logadmin/file-update/",title:Object(j.nb)("File Update"),children:Object(j.nb)("File Update")})}),Object(b.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("perm-audit")},children:Object(b.jsx)(h.a,{className:"nav-link ".concat("perm-audit"===this.props.currentTab?"active":""),to:j.mc+"org/logadmin/perm-audit/",title:Object(j.nb)("Permission"),children:Object(j.nb)("Permission")})})]})}),this.props.children]})})]})}}]),n}(c.Component),ct=n(27);A.a.locale(j.Bb);var ot=function e(t){Object(s.a)(this,e),this.ip=t.ip,this.type=t.type,this.device=t.device,this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.file_name=t.file_name,this.file_path=t.file_path,this.user_name=t.user_name,this.user_email=t.user_email,this.user_contact_email=t.user_contact_email,this.time=A()(t.time).format("YYYY-MM-DD HH:mm:ss")};n(524);A.a.locale(j.Bb);var lt=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).initData=function(e,t,n){O.a.orgAdminListFileAudit(e,t,n).then((function(e){var t=e.data.log_list.map((function(e){return new ot(e)}));a.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page,userSelected:e.data.user_selected,repoSelected:e.data.repo_selected})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.onChangePageNum=function(e,t){e.preventDefault();var n=a.state.page;1==t?n+=1:n-=1;var s=a.state.userSelected,r=a.state.repoSelected;a.initData(s,r,n)},a.filterUser=function(e){a.setState({userSelected:e})},a.filterRepo=function(e){a.setState({repoSelected:e})},a.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,n=this.state.repoSelected;this.initData(t,n,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return Object(b.jsxs)("div",{className:"cur-view-content",children:[(this.state.userSelected||this.state.repoSelected)&&Object(b.jsxs)(o.a.Fragment,{children:[this.state.userSelected&&Object(b.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null),children:[Object(b.jsx)("span",{className:"no-deco",children:this.state.userSelected})," \u2716"]}),this.state.repoSelected&&Object(b.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterRepo.bind(this,null),children:[Object(b.jsx)("span",{className:"no-deco",children:this.state.repoSelected})," \u2716"]})]}),Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"24%",children:Object(j.nb)("User")}),Object(b.jsx)("th",{width:"10%",children:Object(j.nb)("Type")}),Object(b.jsx)("th",{width:"13%",children:Object(j.nb)("IP")}),Object(b.jsx)("th",{width:"17%",children:Object(j.nb)("Date")}),Object(b.jsx)("th",{width:"18%",children:Object(j.nb)("Library")}),Object(b.jsx)("th",{width:"18%",children:Object(j.nb)("File")})]})}),Object(b.jsx)("tbody",{children:t.map((function(t,n){return Object(b.jsx)(dt,{fileEvent:t,isItemFreezed:e.state.isItemFreezed,filterUser:e.filterUser,filterRepo:e.filterRepo,userSelected:e.state.userSelected,repoSelected:e.state.repoSelected},n)}))})]}),Object(b.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(j.nb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(b.jsx)("span",{children:" | "}),this.state.pageNext&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(j.nb)("Next")})]})]})}}]),n}(o.a.Component),dt=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onMouseEnter=function(){a.props.isItemFreezed||a.setState({showMenu:!0,highlight:!0})},a.onMouseLeave=function(){a.props.isItemFreezed||a.setState({showMenu:!1,highlight:!1})},a.toggleUserDropdown=function(){a.setState({userDropdownOpen:!a.state.userDropdownOpen})},a.renderUser=function(e){return e.user_email?Object(b.jsxs)("span",{children:[Object(b.jsx)("a",{href:j.mc+"org/useradmin/info/"+e.user_email+"/",children:e.user_name})," ",Object(b.jsxs)(m.l,{size:"sm",isOpen:a.state.userDropdownOpen,toggle:a.toggleUserDropdown,className:a.state.highlight?"":"vh",tag:"span",children:[Object(b.jsx)(m.o,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),Object(b.jsx)(m.n,{children:Object(b.jsxs)(m.m,{onClick:a.props.filterUser.bind(Object(ct.a)(a),e.user_email),children:[Object(j.nb)("Only Show")," ",Object(b.jsx)("span",{className:"font-weight-bold",children:e.user_name})]})})]})]}):Object(j.nb)("Anonymous User")},a.renderType=function(e){return-1!=e.indexOf("web")&&(e="web"),-1!=e.indexOf("api")&&(e="api"),-1!=e.indexOf("share-link")&&(e="share link"),e},a.toggleRepoDropdown=function(){a.setState({repoDropdownOpen:!a.state.repoDropdownOpen})},a.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),Object(b.jsxs)("span",{children:[Object(b.jsx)("span",{children:t}),e.repo_name&&Object(b.jsxs)(m.l,{size:"sm",isOpen:a.state.repoDropdownOpen,toggle:a.toggleRepoDropdown,className:a.state.highlight?"":"vh",children:[Object(b.jsx)(m.o,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),Object(b.jsx)(m.n,{children:Object(b.jsxs)(m.m,{size:"sm",onClick:a.props.filterRepo.bind(Object(ct.a)(a),e.repo_name),children:[Object(j.nb)("Only Show")," ",Object(b.jsx)("span",{className:"font-weight-bold",children:e.repo_name})]})})]})]})},a.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1,repoDropdownOpen:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.fileEvent;return this.props.userSelected&&e.user_email!==this.props.userSelected||this.props.repoSelected&&e.repo_name!==this.props.repoSelected?null:Object(b.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:this.renderUser(e)}),Object(b.jsx)("td",{children:this.renderType(e.type)}),Object(b.jsx)("td",{children:e.ip}),Object(b.jsx)("td",{children:A()(e.time).format("YYYY-MM-DD HH:mm:ss")}),Object(b.jsx)("td",{children:this.renderRepo(e)}),Object(b.jsx)("td",{children:Object(b.jsx)("span",{title:e.file_path,children:e.file_name})})]})}}]),n}(o.a.Component),ht=lt;A.a.locale(j.Bb);var jt=function e(t){Object(s.a)(this,e),this.repo_id=t.repo_id,this.description=t.description,this.repo_name=t.repo_name,this.user_name=t.user_name,this.user_email=t.user_email,this.repo_encrypted=t.repo_encrypted,this.repo_commit_id=t.repo_commit_id,this.user_contact_email=t.user_contact_email,this.time=A()(t.time).format("YYYY-MM-DD HH:mm:ss")},ut=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).renderContentItem=function(e){var t="";t+='<ul class="list-group list-group-flush">';for(var n=0,s=e.length;n<s;n++)t+='<li class="list-group-item">'+e[n]+"</li>";return{__html:t+="</ul>"}},a.renderContent=function(){return a.state.newfile.length>0?Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:Object(j.nb)("New files")}),Object(b.jsx)("p",{children:a.state.time}),Object(b.jsx)("div",{dangerouslySetInnerHTML:a.renderContentItem(a.state.newfile)})]}):a.state.removed.length>0?Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:Object(j.nb)("Deleted files")}),Object(b.jsx)("p",{children:a.state.time}),Object(b.jsx)("div",{dangerouslySetInnerHTML:a.renderContentItem(a.state.removed)})]}):a.state.renamed.length>0?Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:Object(j.nb)("Renamed or Moved files")}),Object(b.jsx)("p",{children:a.state.time}),Object(b.jsx)("div",{dangerouslySetInnerHTML:a.renderContentItem(a.state.renamed)})]}):a.state.modified.length>0?Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:Object(j.nb)("Modified files")}),Object(b.jsx)("p",{children:a.state.time}),Object(b.jsx)("div",{dangerouslySetInnerHTML:a.renderContentItem(a.state.modified)})]}):a.state.newdir.length>0?Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:Object(j.nb)("New directories")}),Object(b.jsx)("p",{children:a.state.time}),Object(b.jsx)("div",{dangerouslySetInnerHTML:a.renderContentItem(a.state.newdir)})]}):a.state.deldir.length>0?Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:Object(j.nb)("Deleted directories")}),Object(b.jsx)("p",{children:a.state.time}),Object(b.jsx)("div",{dangerouslySetInnerHTML:a.renderContentItem(a.state.deldir)})]}):void 0},a.state={time:"",renamed:[],deldir:[],modified:[],newdir:[],newfile:[],removed:[]},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;O.a.orgAdminGetFileUpdateDetail(this.props.repoID,this.props.commitID).then((function(t){e.setState({time:t.data.date_time,renamed:e.state.renamed.concat(t.data.renamed),deldir:e.state.deldir.concat(t.data.deldir),modified:e.state.modified.concat(t.data.modified),newdir:e.state.newdir.concat(t.data.newdir),newfile:e.state.newfile.concat(t.data.new),removed:e.state.removed.concat(t.data.removed)})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))}},{key:"render",value:function(){return Object(b.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggleCancel,children:[Object(b.jsx)(m.A,{toggle:this.props.toggleCancel,children:Object(j.nb)("Modification Details")}),Object(b.jsx)(m.y,{children:this.renderContent()})]})}}]),n}(o.a.Component);A.a.locale(j.Bb);var bt=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).initData=function(e,t,n){O.a.orgAdminListFileUpdate(e,t,n).then((function(e){var t=e.data.log_list.map((function(e){return new jt(e)}));a.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.onChangePageNum=function(e,t){e.preventDefault();var n=a.state.page;1==t?n+=1:n-=1;var s=a.state.userSelected,r=a.state.repoSelected;a.initData(s,r,n)},a.toggleCancelDetail=function(){a.setState({showDetails:!a.state.showDetails})},a.onDetails=function(e,t){e.preventDefault(),a.setState({showDetails:!a.state.showDetails,repoID:t.repo_id,commitID:t.repo_commit_id})},a.filterUser=function(e){a.setState({userSelected:e})},a.filterRepo=function(e){a.setState({repoSelected:e})},a.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1,showDetails:!1,repoID:"",commitID:""},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,n=this.state.repoSelected;this.initData(t,n,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return Object(b.jsxs)("div",{className:"cur-view-content",children:[(this.state.userSelected||this.state.repoSelected)&&Object(b.jsxs)(o.a.Fragment,{children:[this.state.userSelected&&Object(b.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null),children:[Object(b.jsx)("span",{className:"no-deco",children:this.state.userSelected})," \u2716"]}),this.state.repoSelected&&Object(b.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterRepo.bind(this,null),children:[Object(b.jsx)("span",{className:"no-deco",children:this.state.repoSelected})," \u2716"]})]}),Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"25%",children:Object(j.nb)("User")}),Object(b.jsx)("th",{width:"17%",children:Object(j.nb)("Date")}),Object(b.jsx)("th",{width:"25%",children:Object(j.nb)("Library")}),Object(b.jsx)("th",{width:"33%",children:Object(j.nb)("Action")})]})}),Object(b.jsx)("tbody",{children:t.map((function(t,n){return Object(b.jsx)(pt,{fileEvent:t,isItemFreezed:e.state.isItemFreezed,onDetails:e.onDetails,filterUser:e.filterUser,filterRepo:e.filterRepo,userSelected:e.state.userSelected,repoSelected:e.state.repoSelected},n)}))})]}),Object(b.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(j.nb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(b.jsx)("span",{children:" | "}),this.state.pageNext&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(j.nb)("Next")})]}),this.state.showDetails&&Object(b.jsx)(C.a,{children:Object(b.jsx)(ut,{repoID:this.state.repoID,commitID:this.state.commitID,toggleCancel:this.toggleCancelDetail})})]})}}]),n}(c.Component),pt=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onMouseEnter=function(){a.props.isItemFreezed||a.setState({showMenu:!0,highlight:!0})},a.onMouseLeave=function(){a.props.isItemFreezed||a.setState({showMenu:!1,highlight:!1})},a.toggleUserDropdown=function(){a.setState({userDropdownOpen:!a.state.userDropdownOpen})},a.renderUser=function(e){return e.user_email?Object(b.jsxs)("span",{children:[Object(b.jsx)("a",{href:j.mc+"org/useradmin/info/"+e.user_email+"/",children:e.user_name})," ",Object(b.jsxs)(m.l,{size:"sm",isOpen:a.state.userDropdownOpen,toggle:a.toggleUserDropdown,className:a.state.highlight?"":"vh",tag:"span",children:[Object(b.jsx)(m.o,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),Object(b.jsx)(m.n,{children:Object(b.jsxs)(m.m,{onClick:a.props.filterUser.bind(Object(ct.a)(a),e.user_email),children:[Object(j.nb)("Only Show")," ",Object(b.jsx)("span",{className:"font-weight-bold",children:e.user_name})]})})]})]}):Object(j.nb)("Anonymous User")},a.toggleRepoDropdown=function(){a.setState({repoDropdownOpen:!a.state.repoDropdownOpen})},a.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),Object(b.jsxs)("span",{children:[Object(b.jsx)("span",{children:t}),e.repo_name&&Object(b.jsxs)(m.l,{size:"sm",isOpen:a.state.repoDropdownOpen,toggle:a.toggleRepoDropdown,className:a.state.highlight?"":"vh",children:[Object(b.jsx)(m.o,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),Object(b.jsx)(m.n,{children:Object(b.jsxs)(m.m,{size:"sm",onClick:a.props.filterRepo.bind(Object(ct.a)(a),e.repo_name),children:[Object(j.nb)("Only Show")," ",Object(b.jsx)("span",{className:"font-weight-bold",children:e.repo_name})]})})]})]})},a.renderAction=function(e){return e.repo_encrypted||!e.repo_id?Object(b.jsx)("td",{children:e.description}):Object(b.jsxs)("td",{children:[e.description,Object(b.jsx)("a",{className:"font-weight-normal text-muted ml-1",href:"#",onClick:function(t){return a.props.onDetails(t,e)},children:Object(j.nb)("Details")})]})},a.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1,repoDropdownOpen:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.fileEvent;return this.props.userSelected&&e.user_email!==this.props.userSelected||this.props.repoSelected&&e.repo_name!==this.props.repoSelected?null:Object(b.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:this.renderUser(e)}),Object(b.jsx)("td",{children:A()(e.time).format("YYYY-MM-DD HH:mm:ss")}),Object(b.jsx)("td",{children:this.renderRepo(e)}),this.renderAction(e)]})}}]),n}(o.a.Component),gt=bt;A.a.locale(j.Bb);var mt=function e(t){Object(s.a)(this,e),this.from_user_name=t.from_user_name,this.from_user_email=t.from_user_email,this.from_user_contact_email=t.from_user_contact_email,this.to_user_email=t.to_user_email,this.to_user_name=t.to_user_name,this.to_user_contact_email=t.to_user_contact_email,this.to_group_name=t.to_group_name,this.to_group_id=t.to_group_id,this.type=t.type,this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.folder_name=t.folder_name,this.folder_path=t.folder_path,this.time=A()(t.time).format("YYYY-MM-DD HH:mm:ss"),this.permission=t.permission};A.a.locale(j.Bb);var Ot=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).initData=function(e,t,n){O.a.orgAdminListPermAudit(e,t,n).then((function(e){var t=e.data.log_list.map((function(e){return new mt(e)}));a.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},a.onChangePageNum=function(e,t){e.preventDefault();var n=a.state.page;1==t?n+=1:n-=1,a.initData(n)},a.filterUser=function(e){a.setState({userSelected:e})},a.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,n=this.state.repoSelected;this.initData(t,n,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return Object(b.jsxs)("div",{className:"cur-view-content",children:[this.state.userSelected&&Object(b.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null),children:[Object(b.jsx)("span",{className:"no-deco",children:this.state.userSelected})," \u2716"]}),Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"18%",children:Object(j.nb)("Share From")}),Object(b.jsx)("th",{width:"15%",children:Object(j.nb)("Share To")}),Object(b.jsx)("th",{width:"8%",children:Object(j.nb)("Actions")}),Object(b.jsx)("th",{width:"13%",children:Object(j.nb)("Permission")}),Object(b.jsx)("th",{width:"15%",children:Object(j.nb)("Library")}),Object(b.jsx)("th",{width:"15%",children:Object(j.nb)("Folder")}),Object(b.jsx)("th",{width:"16%",children:Object(j.nb)("Date")})]})}),Object(b.jsx)("tbody",{children:t.map((function(t,n){return Object(b.jsx)(ft,{permEvent:t,isItemFreezed:e.state.isItemFreezed,filterUser:e.filterUser,userSelected:e.state.userSelected},n)}))})]}),Object(b.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(j.nb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(b.jsx)("span",{children:" | "}),this.state.pageNext&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(j.nb)("Next")})]})]})}}]),n}(c.Component),ft=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onMouseEnter=function(){a.props.isItemFreezed||a.setState({showMenu:!0,highlight:!0})},a.onMouseLeave=function(){a.props.isItemFreezed||a.setState({showMenu:!1,highlight:!1})},a.renderFromUser=function(e){return e.from_user_email?Object(b.jsxs)("span",{children:[Object(b.jsx)("a",{href:j.mc+"org/useradmin/info/"+e.from_user_email+"/",children:e.from_user_name})," ",Object(b.jsxs)(m.l,{size:"sm",isOpen:a.state.userDropdownOpen,toggle:a.toggleUserDropdown,className:a.state.highlight?"":"vh",tag:"span",children:[Object(b.jsx)(m.o,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),Object(b.jsx)(m.n,{children:Object(b.jsxs)(m.m,{onClick:a.props.filterUser.bind(Object(ct.a)(a),e.from_user_email),children:[Object(j.nb)("Only Show")," ",Object(b.jsx)("span",{className:"font-weight-bold",children:e.from_user_name})]})})]})]}):Object(j.nb)("Anonymous User")},a.toggleUserDropdown=function(){a.setState({userDropdownOpen:!a.state.userDropdownOpen})},a.renderToUser=function(e){return-1!=e.type.indexOf("public")?Object(b.jsx)("a",{href:j.mc+"org/",children:Object(j.nb)("Organization")}):-1!=e.type.indexOf("group")?e.to_group_name?Object(b.jsx)("a",{href:j.mc+"org/groupadmin/"+e.to_group_id+"/",children:e.to_group_name}):"Deleted":-1!=e.type.indexOf("user")?Object(b.jsx)("a",{href:j.mc+"org/useradmin/info/"+e.to_user_email+"/",children:e.to_user_name}):void 0},a.renderType=function(e){return-1!=e.indexOf("add")&&(e="Add"),-1!=e.indexOf("modify")&&(e="Modify"),-1!=e.indexOf("delete")&&(e="Delete"),e},a.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),t},a.renderFolder=function(e){var t="/";return e&&(t=e),t},a.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.permEvent;return this.props.userSelected&&e.from_user_email!==this.props.userSelected?null:Object(b.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:this.renderFromUser(e)}),Object(b.jsx)("td",{children:this.renderToUser(e)}),Object(b.jsx)("td",{children:this.renderType(e.type)}),Object(b.jsx)("td",{children:f.a.sharePerms(e.permission)}),Object(b.jsx)("td",{children:this.renderRepo(e)}),Object(b.jsx)("td",{children:this.renderFolder(e.folder_name)}),Object(b.jsx)("td",{children:A()(e.time).format("YYYY-MM-DD HH:mm:ss")})]})}}]),n}(o.a.Component),xt=Ot,vt=(n(184),n(128),function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onCloseSidePanel=function(){a.setState({isSidePanelClosed:!a.state.isSidePanelClosed})},a.tabItemClick=function(e){a.setState({currentTab:e})},a.state={isSidePanelClosed:!1,currentTab:"users"},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=window.location.href.split("/"),t=e[e.length-2];-1!=location.href.indexOf("".concat(j.mc,"org/useradmin"))&&(t="users"),-1!=location.href.indexOf("".concat(j.mc,"org/groupadmin"))&&(t="groupadmin"),-1!=location.href.indexOf("".concat(j.mc,"org/departmentadmin"))&&(t="departmentadmin"),this.setState({currentTab:t})}},{key:"render",value:function(){var e=this.state,t=e.isSidePanelClosed,n=e.currentTab;return Object(b.jsxs)("div",{id:"main",children:[Object(b.jsx)(p,{isSidePanelClosed:t,onCloseSidePanel:this.onCloseSidePanel,currentTab:n,tabItemClick:this.tabItemClick}),Object(b.jsx)("div",{className:"main-panel o-hidden",children:Object(b.jsxs)(h.b,{className:"reach-router",children:[Object(b.jsx)(Ee,{path:j.mc+"org/orgmanage"}),Object(b.jsx)(z,{path:j.mc+"org/useradmin"}),Object(b.jsx)(F,{path:j.mc+"org/useradmin/search-users"}),Object(b.jsx)(T,{path:j.mc+"org/useradmin/admins/"}),Object(b.jsx)(X,{path:j.mc+"org/useradmin/info/:email/"}),Object(b.jsx)(ae,{path:j.mc+"org/useradmin/info/:email/repos/"}),Object(b.jsx)(le,{path:j.mc+"org/useradmin/info/:email/shared-repos/"}),Object(b.jsx)(be,{path:j.mc+"org/groupadmin"}),Object(b.jsx)(me,{path:j.mc+"org/groupadmin/search-groups"}),Object(b.jsx)(we,{path:j.mc+"org/groupadmin/:groupID/"}),Object(b.jsx)(Ce,{path:j.mc+"org/groupadmin/:groupID/repos/"}),Object(b.jsx)(Ae,{path:j.mc+"org/groupadmin/:groupID/members/"}),Object(b.jsx)(Fe,{path:j.mc+"org/repoadmin"}),Object(b.jsx)(Qe,{path:j.mc+"org/publinkadmin"}),Object(b.jsxs)(qe,{path:j.mc+"org/departmentadmin",children:[Object(b.jsx)(We,{path:"/"}),Object(b.jsx)(rt,{path:"groups/:groupID"})]}),Object(b.jsxs)(it,{path:j.mc+"org/logadmin",currentTab:n,tabItemClick:this.tabItemClick,children:[Object(b.jsx)(ht,{path:"/"}),Object(b.jsx)(gt,{path:"file-update"}),Object(b.jsx)(xt,{path:"perm-audit"})]})]})})]})}}]),n}(o.a.Component));d.a.render(Object(b.jsx)(vt,{}),document.getElementById("wrapper"))},209:function(e,t,n){},237:function(e,t,n){},524:function(e,t,n){}},[[1581,1,0]]]);
//# sourceMappingURL=orgAdmin.chunk.js.map